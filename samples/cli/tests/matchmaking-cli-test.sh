#!/usr/bin/env bash

# Copyright (c) 2021 AccelByte Inc. All Rights Reserved.
# This is licensed software from AccelByte Inc, for limitations
# and restrictions contact your company contract manager.
#
# Code generated. DO NOT EDIT!

# Meta:
# - random seed: 256
# - template file: python-cli-unit-test.j2

# Instructions:
# - Run the Justice SDK Mock Server first before running this script.

EXIT_CODE=0
PYTHON='python3'
MODULE='accelbyte_py_sdk_cli'
MODULE_PATH='../samples/cli'

export AB_BASE_URL="http://127.0.0.1:8080"
export AB_CLIENT_ID="admin"
export AB_CLIENT_SECRET="admin"
export AB_NAMESPACE="test"
export PYTHONPATH=$MODULE_PATH:$PYTHONPATH

touch "tmp.dat"

if [ "$BATCH" = true ] ; then

$PYTHON -m $MODULE 'start-interactive-session' --continue_on_error '--writer=tap' << END
matchmaking-get-healthcheck-info --login_with_auth "Bearer foo"
matchmaking-handler-v3-healthz --login_with_auth "Bearer foo"
matchmaking-get-all-channels-handler --login_with_auth "Bearer foo"
matchmaking-create-channel-handler '{"deployment": "EAxcVpFrttufHIRd", "description": "H9UzVRiXbqlAw7r6", "find_match_timeout_seconds": 100, "game_mode": "7eHpzSn3ZPUdc0qh", "joinable": false, "max_delay_ms": 100, "region_expansion_rate_ms": 26, "rule_set": {"alliance": {"combination": {"alliances": [[{"max": 29, "min": 51, "name": "pBJHPtcDs8bBZLCX"}, {"max": 77, "min": 89, "name": "x8bbgorQeFbQ1g7q"}, {"max": 2, "min": 27, "name": "PngUNB1vRodwpzS6"}], [{"max": 60, "min": 6, "name": "aDpv8N7ZQVqGj6oD"}, {"max": 76, "min": 11, "name": "jWjkY1aXlFcDtgOj"}, {"max": 5, "min": 16, "name": "YkHs1cnz1JSDgY1T"}], [{"max": 23, "min": 31, "name": "vbTgrhRTcPiSuL0S"}, {"max": 23, "min": 21, "name": "y6XM4OI18mAQLnzj"}, {"max": 78, "min": 18, "name": "f8GZ2WBZqxYG3aRE"}]], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 41, "role_flexing_second": 86}, "max_number": 61, "min_number": 15, "player_max_number": 87, "player_min_number": 94}, "alliance_flexing_rule": [{"combination": {"alliances": [[{"max": 98, "min": 74, "name": "FvdiRilZ7oFgx4c8"}, {"max": 84, "min": 7, "name": "umKtPDKJDXn7Z4U6"}, {"max": 66, "min": 38, "name": "VbMqSszE8GHavj7A"}], [{"max": 30, "min": 6, "name": "rKsxwkosAVerXpc1"}, {"max": 58, "min": 36, "name": "8XfwHuKeb9l3rGN9"}, {"max": 55, "min": 53, "name": "3sNm84hddSpHt0P7"}], [{"max": 80, "min": 70, "name": "m4eu6d5tA5jUmiTq"}, {"max": 31, "min": 66, "name": "yhPFdxLzFQN05MYz"}, {"max": 98, "min": 16, "name": "NPRZYdFLIAjGGJdd"}]], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 13, "role_flexing_second": 41}, "duration": 0, "max_number": 40, "min_number": 44, "player_max_number": 47, "player_min_number": 91}, {"combination": {"alliances": [[{"max": 9, "min": 76, "name": "vkLGMS0lyuI9a2I9"}, {"max": 42, "min": 52, "name": "6Vpbsx5w8hqUI06U"}, {"max": 32, "min": 43, "name": "OXGSLmCVuHOPlLlk"}], [{"max": 45, "min": 1, "name": "R8sKgnuRkgghGoYu"}, {"max": 31, "min": 23, "name": "D391C2qtPYokahFj"}, {"max": 21, "min": 25, "name": "QsfCaTmt1d67FXGk"}], [{"max": 77, "min": 37, "name": "isV6zwPuo3td6TC6"}, {"max": 71, "min": 57, "name": "3lMjGSWN2laRlxfc"}, {"max": 20, "min": 71, "name": "HfYakUCTqGkE7wcW"}]], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 60, "role_flexing_second": 78}, "duration": 38, "max_number": 34, "min_number": 23, "player_max_number": 31, "player_min_number": 91}, {"combination": {"alliances": [[{"max": 72, "min": 91, "name": "WytLPziZMdjxcBZu"}, {"max": 11, "min": 86, "name": "TAQ6iiPlSC2uE4o5"}, {"max": 97, "min": 46, "name": "ZBm3MqHcUmLZZbSq"}], [{"max": 2, "min": 25, "name": "8RwNmn9HrNQy4uZA"}, {"max": 53, "min": 81, "name": "iE0mit9RGCCHYzUO"}, {"max": 4, "min": 49, "name": "EdscKHPEqgA8yu7V"}], [{"max": 22, "min": 94, "name": "6Jt4Ymos9Jcdos4f"}, {"max": 44, "min": 5, "name": "BMcaYmvCkGZ5dAgq"}, {"max": 48, "min": 96, "name": "pBFmaLoxozr6wfNP"}]], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 81, "role_flexing_second": 90}, "duration": 50, "max_number": 78, "min_number": 77, "player_max_number": 43, "player_min_number": 41}], "flexing_rule": [{"attribute": "qtlB2jJCSQT279ZZ", "criteria": "PYGu0rdlgdWyOtXi", "duration": 44, "reference": 0.0424604369414503}, {"attribute": "hoQrpOsDBU5SepjC", "criteria": "hB3V0v52Dlym6puQ", "duration": 57, "reference": 0.8940640754758433}, {"attribute": "xoJ8aeCnaLpUKp44", "criteria": "YUDjasWIPUvmEejt", "duration": 66, "reference": 0.9414672111380048}], "match_options": {"options": [{"name": "kILsSSyDdmykmoPY", "type": "gc2L4jk4Lo0LSP0p"}, {"name": "f4IxjUkl535X3ate", "type": "EKDpADz1x3poD3Qg"}, {"name": "b3boLQQ1MzH7Qm8b", "type": "wbmXgdAPh1EThG96"}]}, "matching_rule": [{"attribute": "gAFKK2WDgCcxvONZ", "criteria": "m3EeERmDnyeFoF7V", "reference": 0.7101022362588907}, {"attribute": "Z6pf3vneSD2Tb3g7", "criteria": "mSQUhAEtrmjqU6YE", "reference": 0.8886636777062777}, {"attribute": "p4lSck0ZHn5GI39Y", "criteria": "BHqaTHeKtW18iGeU", "reference": 0.18267106669748967}], "rebalance_enable": false, "sub_game_modes": {"QipcCx9Zw5D2L7vI": {"alliance": {"combination": {"alliances": [[{"max": 33, "min": 15, "name": "VvUfHQvsHXNUNe4m"}, {"max": 16, "min": 7, "name": "go5QB65lSAiYnNjk"}, {"max": 11, "min": 33, "name": "ZrQvGgbLdLsFzHkB"}], [{"max": 80, "min": 60, "name": "r1yrOMlNFSrUEirn"}, {"max": 20, "min": 5, "name": "X9fDmIbeZxzfTcyi"}, {"max": 41, "min": 54, "name": "yUZNmTBcvrbYCwZt"}], [{"max": 48, "min": 80, "name": "FHyPLtI8ilbyDPUI"}, {"max": 18, "min": 77, "name": "88cekdqCt81P1ktf"}, {"max": 71, "min": 61, "name": "ovmv9gsR5cJcHm3S"}]], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 29, "role_flexing_second": 89}, "max_number": 60, "min_number": 26, "player_max_number": 65, "player_min_number": 74}, "alliance_flexing_rule": [{"combination": {"alliances": [[{"max": 42, "min": 65, "name": "uuySj29a9LJE8HoR"}, {"max": 92, "min": 22, "name": "1X2PFAAMwzHPxB1U"}, {"max": 38, "min": 58, "name": "kYs4Yw20DOqOBSC2"}], [{"max": 60, "min": 76, "name": "0sG6vxkfUcmqRRbc"}, {"max": 10, "min": 56, "name": "J5i0EeDxOgBnhhqE"}, {"max": 24, "min": 63, "name": "IaDml48wdNFLTm5T"}], [{"max": 39, "min": 48, "name": "vQR3biBfsu4jmsRE"}, {"max": 47, "min": 53, "name": "1yEkLgh3tIYt4SqY"}, {"max": 95, "min": 93, "name": "XlbGL8QOxtjzm8y2"}]], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 1, "role_flexing_second": 25}, "duration": 83, "max_number": 45, "min_number": 78, "player_max_number": 29, "player_min_number": 16}, {"combination": {"alliances": [[{"max": 8, "min": 50, "name": "C3IHeHSKLCa3xreN"}, {"max": 61, "min": 71, "name": "UWehwH3q31A806DJ"}, {"max": 12, "min": 28, "name": "as4b6z3LNUj7fdgL"}], [{"max": 54, "min": 64, "name": "84Z8YYk6QEgJjBbE"}, {"max": 60, "min": 96, "name": "oNf3n0hEoRCAcf80"}, {"max": 52, "min": 13, "name": "fFyabWAgIUXiI07A"}], [{"max": 79, "min": 8, "name": "gpwxcfMy9XzjjI5Y"}, {"max": 3, "min": 82, "name": "sKoADkzJEN2VHzih"}, {"max": 68, "min": 3, "name": "O86IlBhnetU4RwTq"}]], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 13, "role_flexing_second": 93}, "duration": 8, "max_number": 61, "min_number": 83, "player_max_number": 55, "player_min_number": 52}, {"combination": {"alliances": [[{"max": 64, "min": 83, "name": "gkXhjDzaQY3snn2Z"}, {"max": 22, "min": 12, "name": "P7cFdP43e5dC9XIB"}, {"max": 43, "min": 3, "name": "dfZgrbHDIDm4hMzF"}], [{"max": 93, "min": 100, "name": "xodenSrUTvfqU0bf"}, {"max": 29, "min": 41, "name": "Mm5cTtFWbotQyXJR"}, {"max": 4, "min": 0, "name": "QWsmqPNs92epxk0i"}], [{"max": 44, "min": 97, "name": "UYTZBRujIUE1Tq5j"}, {"max": 50, "min": 63, "name": "AZvkRCMNFIurjh2i"}, {"max": 26, "min": 93, "name": "db4rbkXj0ZwsVC0g"}]], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 87, "role_flexing_second": 74}, "duration": 60, "max_number": 17, "min_number": 45, "player_max_number": 29, "player_min_number": 45}], "name": "D5fLCr3OOlXVv8ZG"}, "F7uYnGzpipNDigNJ": {"alliance": {"combination": {"alliances": [[{"max": 26, "min": 55, "name": "a1MbqqZtfNWql4nm"}, {"max": 47, "min": 24, "name": "Aft4gqkNNlWkD9eO"}, {"max": 53, "min": 25, "name": "iYRFOn0jJLHC9Lxh"}], [{"max": 44, "min": 81, "name": "KOww3HICQLfl7MUB"}, {"max": 66, "min": 51, "name": "7qtPu64yAtURKLRk"}, {"max": 2, "min": 2, "name": "738HGS6rDgMdIIlh"}], [{"max": 92, "min": 12, "name": "fSiM9331m7Ta1PsK"}, {"max": 4, "min": 63, "name": "50Kv6ecnEevcAx2K"}, {"max": 72, "min": 51, "name": "ehyxlNsjUgxBkF6w"}]], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 29, "role_flexing_second": 91}, "max_number": 73, "min_number": 72, "player_max_number": 9, "player_min_number": 40}, "alliance_flexing_rule": [{"combination": {"alliances": [[{"max": 88, "min": 19, "name": "ediogEhhM2rIizGd"}, {"max": 75, "min": 68, "name": "vOPdq5xrgxSmy1DN"}, {"max": 7, "min": 77, "name": "pCROYqUiGKXVFCmp"}], [{"max": 29, "min": 30, "name": "6sPwVOEDSJsEK5Qp"}, {"max": 82, "min": 96, "name": "hlI2iS5EpGhhvXYc"}, {"max": 22, "min": 21, "name": "0upMzUYnb76tFkEO"}], [{"max": 89, "min": 77, "name": "V3bu1bNCtX7W40V6"}, {"max": 60, "min": 85, "name": "o5sYadCCFrHHC3Dp"}, {"max": 53, "min": 49, "name": "PyrVEiOG4UcqsuGK"}]], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 10, "role_flexing_second": 78}, "duration": 69, "max_number": 89, "min_number": 74, "player_max_number": 99, "player_min_number": 77}, {"combination": {"alliances": [[{"max": 59, "min": 97, "name": "CmE2lPnsbD3SGEdl"}, {"max": 47, "min": 79, "name": "uUccE536ugBp3HBv"}, {"max": 8, "min": 9, "name": "pnDCjgyJlXe36mgW"}], [{"max": 19, "min": 76, "name": "V709xbnGezKsDwG2"}, {"max": 29, "min": 93, "name": "mOR2nvYI9TVqJdvz"}, {"max": 5, "min": 37, "name": "WbfUpaXp5JMl5LL4"}], [{"max": 2, "min": 0, "name": "TxBmZjdrrIxsB0NR"}, {"max": 38, "min": 60, "name": "B1fPqqRRulpqpymD"}, {"max": 22, "min": 88, "name": "uPdjhdinpng5BLy8"}]], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 2, "role_flexing_second": 15}, "duration": 31, "max_number": 79, "min_number": 100, "player_max_number": 37, "player_min_number": 67}, {"combination": {"alliances": [[{"max": 38, "min": 6, "name": "AHjapIkY9Rf4wP57"}, {"max": 6, "min": 57, "name": "zFQbJndUDpdONneA"}, {"max": 4, "min": 97, "name": "zbBdHb2slt71B1Sm"}], [{"max": 23, "min": 31, "name": "IIk0iKoTTS1j02o7"}, {"max": 73, "min": 25, "name": "jTXAQN0qdskdQV0T"}, {"max": 33, "min": 21, "name": "I8EFnmDbxIxi4YKl"}], [{"max": 83, "min": 37, "name": "Nk2Q5Y4Jvaizwiil"}, {"max": 1, "min": 21, "name": "tuUjjt9lIMGql5El"}, {"max": 62, "min": 4, "name": "a9EIIlGcHB3CfR3n"}]], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 61, "role_flexing_second": 5}, "duration": 22, "max_number": 46, "min_number": 9, "player_max_number": 17, "player_min_number": 80}], "name": "3v3MFFJ1KesKoELC"}, "pobBEG8X645xpdXp": {"alliance": {"combination": {"alliances": [[{"max": 1, "min": 17, "name": "giPg4x4yiPX6ues1"}, {"max": 69, "min": 15, "name": "ighU0VUfcYHJbBfA"}, {"max": 75, "min": 78, "name": "SiPW3VgsZXiR1DJ7"}], [{"max": 69, "min": 97, "name": "WKi6tArAURt9plCS"}, {"max": 98, "min": 55, "name": "q8PdH6hJPUAc0RVw"}, {"max": 70, "min": 14, "name": "66bQ71w0deoV9Lx5"}], [{"max": 90, "min": 33, "name": "DA1l2XcrciYNEzvS"}, {"max": 37, "min": 71, "name": "ZYoLfR1KtOv7Zy0b"}, {"max": 56, "min": 77, "name": "uvuKNuy0ytZQ7M6N"}]], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 86, "role_flexing_second": 0}, "max_number": 58, "min_number": 8, "player_max_number": 27, "player_min_number": 12}, "alliance_flexing_rule": [{"combination": {"alliances": [[{"max": 91, "min": 74, "name": "QkmZXElW9YfRSse6"}, {"max": 54, "min": 60, "name": "Az3S4czz0QKFlAVm"}, {"max": 97, "min": 77, "name": "XqP6oo7G73zdxTgO"}], [{"max": 11, "min": 27, "name": "8J1nsv4W2OJhtafx"}, {"max": 78, "min": 38, "name": "SJlHeb34sZKHcl5L"}, {"max": 76, "min": 82, "name": "LOexL4fZvWtND2tc"}], [{"max": 57, "min": 88, "name": "FpX8lNtFEJ7tnkY6"}, {"max": 79, "min": 34, "name": "ca5afj12K2IzrBvv"}, {"max": 100, "min": 43, "name": "m4udE0OXudXgNne8"}]], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 55, "role_flexing_second": 32}, "duration": 94, "max_number": 41, "min_number": 47, "player_max_number": 23, "player_min_number": 98}, {"combination": {"alliances": [[{"max": 5, "min": 59, "name": "6esUp6Sw1I98jeZQ"}, {"max": 35, "min": 16, "name": "caug6CWVG8SWP3gl"}, {"max": 95, "min": 60, "name": "6muswVJnNnN7kAa7"}], [{"max": 18, "min": 51, "name": "0riFc5HTHQIoVsGo"}, {"max": 89, "min": 6, "name": "bRcrEveMdAdiPKDU"}, {"max": 97, "min": 22, "name": "SC00PYeDcagginxn"}], [{"max": 66, "min": 71, "name": "Z5qXn3aoRtlqOECo"}, {"max": 15, "min": 70, "name": "ViHA5CzgFSy8X1A3"}, {"max": 85, "min": 62, "name": "rIfapq5AAeMe4L3m"}]], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 83, "role_flexing_second": 95}, "duration": 90, "max_number": 56, "min_number": 32, "player_max_number": 98, "player_min_number": 58}, {"combination": {"alliances": [[{"max": 54, "min": 94, "name": "KxeE70CaunQNxot3"}, {"max": 89, "min": 100, "name": "BgaWcFX3SUBhyoTs"}, {"max": 79, "min": 72, "name": "WPAxUMkawaGpAyrI"}], [{"max": 46, "min": 64, "name": "Mif3BOdkocVTd4Bx"}, {"max": 34, "min": 26, "name": "GWV6mTJ0sQs6XNbj"}, {"max": 43, "min": 11, "name": "qhnUVLWu8olKdxL6"}], [{"max": 30, "min": 58, "name": "zRmDD0jJvlfV5Oem"}, {"max": 84, "min": 64, "name": "YdYT7DROCjtuzFMb"}, {"max": 55, "min": 71, "name": "G9YI89hmguB8FOTj"}]], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 30, "role_flexing_second": 88}, "duration": 3, "max_number": 29, "min_number": 26, "player_max_number": 37, "player_min_number": 92}], "name": "IzqYkEpstyVTBcrM"}}}, "session_queue_timeout_seconds": 35, "social_matchmaking": false, "use_sub_gamemode": false}' --login_with_auth "Bearer foo"
matchmaking-delete-channel-handler 'rH0zcswwVeMK6MbG' --login_with_auth "Bearer foo"
matchmaking-store-match-results '{"match_id": "IVIu8vvwLc7KY3uV", "players": [{"results": [{"attribute": "oJXTIMtpgkieDyF9", "value": 0.9551615666895776}, {"attribute": "lGdMiHKxbWCYzo8y", "value": 0.6516336295186507}, {"attribute": "2KTK9tmmOnYnOpas", "value": 0.9384547985844873}], "user_id": "ghP1y4Zi7s7QBlk4"}, {"results": [{"attribute": "4Z44B1GZgKg4uKxa", "value": 0.4652651246103652}, {"attribute": "gcGLuC3brWdTYCfH", "value": 0.1630129895793503}, {"attribute": "IySok5DiXZtLW87r", "value": 0.5305517784306876}], "user_id": "ysryod3dNQrmsApR"}, {"results": [{"attribute": "A6HX3RwrKt2ecozL", "value": 0.8416330309406557}, {"attribute": "TOg54vCE48L5oLF6", "value": 0.6176132879407225}, {"attribute": "4lNa4JUMSHNgqRqC", "value": 0.7592360770790583}], "user_id": "7usamANkZlOX9Sfo"}]}' --login_with_auth "Bearer foo"
matchmaking-rebalance '{"match_id": "95HgXqKhTPkwfLM9"}' --login_with_auth "Bearer foo"
matchmaking-queue-session-handler '{"channel": "uSybRzWek2gZvRrv", "client_version": "r0n9d9lvccKMLhrT", "deployment": "rcBE2ItBS3KtKZWe", "error_code": 87, "error_message": "aoFzAyBME74HUtip", "game_mode": "UWYhWV1qx8CzPML5", "joinable": true, "match_id": "faXUr9Sk4lq2faBc", "matching_allies": [{"matching_parties": [{"first_ticket_created_at": 54, "party_attributes": {"hjbngJOUn18G5Mlf": {}, "DTk8aG40NlncceIZ": {}, "SwgAIkgzh4pTU0Am": {}}, "party_id": "4DZhl0bQxFJ3sWCq", "party_members": [{"extra_attributes": {"QpQ2FbKPFMycMSQ4": {}, "qfAacR0LgB5BUXvj": {}, "cu2s6w3VifnKqmTS": {}}, "user_id": "oGH1XEfY6QAYn6WQ"}, {"extra_attributes": {"5UBEU1QAOHfZiGhx": {}, "OdcuDXSxSc3aZPV8": {}, "7pna08gxefTYKhux": {}}, "user_id": "aEc7M4P7UckSC6eP"}, {"extra_attributes": {"eN8i4GrFES9z7xue": {}, "HpATHccee9GXhKcj": {}, "mSEwdrkEnnqKzFsL": {}}, "user_id": "fYalUlfwEQKjU7eH"}], "ticket_created_at": 66, "ticket_id": "F3TQN0OcNDLr36vz"}, {"first_ticket_created_at": 30, "party_attributes": {"4dfiOMZfEhHr39py": {}, "sFO3Zvc1BZG99Lyv": {}, "fvHEsJKQQewVLMUo": {}}, "party_id": "AnaRcYp7FUjfIGaf", "party_members": [{"extra_attributes": {"foflEIByYqeKN0me": {}, "GelYF5wWaDhukU4k": {}, "hGG4vZFTYnPkmSu4": {}}, "user_id": "PWam1jxR7SETWjte"}, {"extra_attributes": {"oc8fgvZDDhoO05oK": {}, "qymxLD1Lcvw6T6mZ": {}, "EiwxxElpMYSWIeVz": {}}, "user_id": "m7z9noowmlTIKVow"}, {"extra_attributes": {"i0RY2VN4ZONJREdU": {}, "Q3z9F1BxNNgnke4a": {}, "kncw7wu9TmXfJWBP": {}}, "user_id": "rx9Ns8eLzYEvwSWT"}], "ticket_created_at": 0, "ticket_id": "A3QhjCMW64f4XhIj"}, {"first_ticket_created_at": 92, "party_attributes": {"lXn77AtYoFzLAATP": {}, "Y8P8P3cfoivvQxev": {}, "ecWw7Rry0KK5rgAG": {}}, "party_id": "O0dW8rX2MVUGKSZ4", "party_members": [{"extra_attributes": {"GcLkt4pK32sJxlZc": {}, "CTpTdRtCHvuk6B6X": {}, "TmSLyn50sigBVZxi": {}}, "user_id": "KdV57GvRyd9UuL02"}, {"extra_attributes": {"Le8HSCslsDd4M1F5": {}, "qRIblS7Nz81GRazP": {}, "AANjfBoldFOyqA2c": {}}, "user_id": "lJ5gEOaCgM6Yn6Ru"}, {"extra_attributes": {"gbNEIpGBFUjOn5mM": {}, "7k8nbLzvtCIW5ynM": {}, "KquUicAeIVXtoWAX": {}}, "user_id": "hMlW4tLqX7OICf5o"}], "ticket_created_at": 61, "ticket_id": "nNYGeAfYFG3wSkHK"}]}, {"matching_parties": [{"first_ticket_created_at": 42, "party_attributes": {"2o8Zkgk0jS6rDWUw": {}, "fhKvrf2AaH4yCWrH": {}, "SppnIZkNnTn3rzH5": {}}, "party_id": "NvAtcvNedgS1fUfK", "party_members": [{"extra_attributes": {"mihDbmu8ePWlQMVD": {}, "XEHeiGTnwyEw6hIW": {}, "DZrpP7rz3ISW510k": {}}, "user_id": "Hr4isTKWjmv67nuH"}, {"extra_attributes": {"CXWfwnwGioVwVzmm": {}, "BVVFfpqx1AeLtzcP": {}, "J3jtDYBo4FUTH7CG": {}}, "user_id": "fKSyxgRR1DiCqSMz"}, {"extra_attributes": {"pqIFGLkDs7ACC1Rg": {}, "BfoNrHlFi2qJLgmB": {}, "LE35YhyiDV90SeI5": {}}, "user_id": "yppBHoytVznCgNyx"}], "ticket_created_at": 85, "ticket_id": "fbT63ShEh8PbGikL"}, {"first_ticket_created_at": 19, "party_attributes": {"7uAPP8PATLpUpxeJ": {}, "lsBJT6Hh3OMjAjq2": {}, "mK8lbSEEelxnb5Qx": {}}, "party_id": "WG2HFnZlA6HKWW4f", "party_members": [{"extra_attributes": {"I1IQcoBQELcNlZkq": {}, "TZrKgXNwvm4e5GX6": {}, "H742OixhtAoKiVm6": {}}, "user_id": "URT95XhnUcvWB28M"}, {"extra_attributes": {"pusuhhDJ5slzgiWZ": {}, "Etyd56LfxnbY97jj": {}, "YgXchCbkXX26uEdC": {}}, "user_id": "fQaMAQuTKfC0I2kN"}, {"extra_attributes": {"jCMDtDMrentgn3Dh": {}, "qciwIeShF9RKb9vv": {}, "xuJlhXbWhbwPwToC": {}}, "user_id": "6knjVwVnzaqSfJiQ"}], "ticket_created_at": 65, "ticket_id": "kCh3QIZsUf8lGFXc"}, {"first_ticket_created_at": 24, "party_attributes": {"SOAjHJWwfCjYwWkL": {}, "ob9gKLqs2nEZhpBy": {}, "fHZinxNfgPAwkMBs": {}}, "party_id": "znlBUqnLT4AbGptK", "party_members": [{"extra_attributes": {"aWNvPbpg7yrRvXfZ": {}, "6rvgvEY3Hht1SwqT": {}, "sKKKo37NHDOQe91P": {}}, "user_id": "s3ztUIV0dS6hIH9c"}, {"extra_attributes": {"4VfkyrwpuXxbaERb": {}, "fgPmi0eHkt1mr9EO": {}, "IFg0dnWIYN2NVL70": {}}, "user_id": "Iw157g00jr9b8MuY"}, {"extra_attributes": {"mmeKTmBNvGYxEQdf": {}, "3ewoGGoY7xmFNAmj": {}, "DDCvs78mcMdiS76Y": {}}, "user_id": "ApGJ9ufwLYkqIgLu"}], "ticket_created_at": 92, "ticket_id": "WgumrIz4NhGztZpr"}]}, {"matching_parties": [{"first_ticket_created_at": 11, "party_attributes": {"U4fwQIiLXgmRasvj": {}, "O4lj8m3XEwP2b4gd": {}, "3xOeii8Jnmssep2x": {}}, "party_id": "D2NY0kABeGs9yxah", "party_members": [{"extra_attributes": {"ld1pO0Gyf5PO3COy": {}, "MvczgEpzZ3Fbtxfh": {}, "cRC7IVYa6iZ5uFRY": {}}, "user_id": "Nn3SHiWxF0YbuU5a"}, {"extra_attributes": {"r5qTLWUCy0Afgc05": {}, "0XIZRW491e94mQjV": {}, "OOBnIWhunElqZUod": {}}, "user_id": "p3IhtCSHy1ei1fIr"}, {"extra_attributes": {"PvfHnRN06EjRwEQl": {}, "NapJRfk4f9Zcw1pE": {}, "HAyNFxcVTKuAQTGh": {}}, "user_id": "5BxjWOozGoDtsUuY"}], "ticket_created_at": 29, "ticket_id": "0O4zd8Tb7cUNGPTB"}, {"first_ticket_created_at": 48, "party_attributes": {"zfjv9oYMXMjlVHY1": {}, "AHwF3vGoav7MK0Pc": {}, "LnEkcokKwcQ0baDT": {}}, "party_id": "9OyJ2h23GUS2amU7", "party_members": [{"extra_attributes": {"syGlElXdEAOrVSnL": {}, "ocLVVYamQc4wcG5n": {}, "DBLJoJHbiQ5duE5p": {}}, "user_id": "4cfs2E41cK8QTwiI"}, {"extra_attributes": {"AvxSvNDlmM5nQFMG": {}, "zs7fzjgyc44mEh9t": {}, "Rk8knYSV30lnroQe": {}}, "user_id": "hMDli6t9unQLYXxm"}, {"extra_attributes": {"09wpGAbpEmDY9vLh": {}, "3u6EDsUmrV6kH4Oo": {}, "tKwG3UC6XCnnZxF8": {}}, "user_id": "CmQr17W65br34rBB"}], "ticket_created_at": 81, "ticket_id": "FhO7VW3mbDVMDu87"}, {"first_ticket_created_at": 40, "party_attributes": {"1eym5ydC6p25xCWT": {}, "qUOYZENJ1QHZQxPR": {}, "XH7uxBJEECQE1li3": {}}, "party_id": "Bg7Jxc9pUnZmvhid", "party_members": [{"extra_attributes": {"wCkZwqjYLfTiCO1N": {}, "DBvQvRPnAz4VzW0C": {}, "poBCbyJsF5IjF1c0": {}}, "user_id": "W338HS6CBgVRyihY"}, {"extra_attributes": {"NZ84CVhziXV8HwSm": {}, "vcvcDKF19yVRafCj": {}, "OuSYht83AdvBaagT": {}}, "user_id": "iRJ8daGTVX3Bb7jl"}, {"extra_attributes": {"z5IfHgKjI9mwJSrN": {}, "8jkIykR2zbaI6PD7": {}, "fEscShnGUGUtV9GJ": {}}, "user_id": "279GDbLNwjm3FK0n"}], "ticket_created_at": 27, "ticket_id": "rzVCcI8y3Cz0YqCK"}]}], "namespace": "Uh5RD9vNAp4jinFp", "party_attributes": {"nQ5xF9wwbvMZyeDe": {}, "RnVfPUa6xVVBcq3w": {}, "ZpFIYeAg79HcLJXJ": {}}, "party_id": "7mpVI6eTYAjdPlCi", "queued_at": 86, "region": "4XSpWBAetsanzqP8", "server_name": "oxfrtbECD1CYPwai", "status": "BAxfYL8Avt70ZUT2", "ticket_id": "fSk3LL0calqxEewu", "updated_at": "1987-04-08T00:00:00Z"}' --login_with_auth "Bearer foo"
matchmaking-dequeue-session-handler '{"match_id": "S469k2hG0WKt4sUm"}' --login_with_auth "Bearer foo"
matchmaking-query-session-handler 'anYxM0UHZVNYzGMN' --login_with_auth "Bearer foo"
matchmaking-update-play-time-weight '{"playtime": 70, "userID": "WbZIdhevfZvyV7Ac", "weight": 0.22656342994411405}' --login_with_auth "Bearer foo"
matchmaking-get-all-party-in-all-channel --login_with_auth "Bearer foo"
matchmaking-bulk-get-sessions --login_with_auth "Bearer foo"
matchmaking-export-channels --login_with_auth "Bearer foo"
matchmaking-import-channels --login_with_auth "Bearer foo"
matchmaking-get-single-matchmaking-channel 'dcZwKjYDdmJOlzwm' --login_with_auth "Bearer foo"
matchmaking-update-matchmaking-channel '{"deployment": "9Su4FnS98QqftSjq", "description": "7sn8yreciPLfkVyy", "findMatchTimeoutSeconds": 72, "joinable": true, "max_delay_ms": 38, "region_expansion_rate_ms": 3, "ruleSet": {"alliance": {"combination": {"alliances": [[{"max": 80, "min": 66, "name": "F35hCER4nGmWGgTJ"}, {"max": 11, "min": 5, "name": "HlJl4tHGa4XfZcd9"}, {"max": 59, "min": 97, "name": "u4q1bTHXIjfJKyFl"}], [{"max": 79, "min": 24, "name": "0u1uuoVdn9yVoSlK"}, {"max": 81, "min": 75, "name": "chPHNL4X3LLaGPGd"}, {"max": 33, "min": 60, "name": "LE8SohhhuiTnJarY"}], [{"max": 20, "min": 13, "name": "HBDdSzBXdxapwhd5"}, {"max": 70, "min": 14, "name": "QYBQuxLvPuWYvE3f"}, {"max": 38, "min": 81, "name": "H6QXmpZ9X3fUSR1l"}]], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 77, "role_flexing_second": 34}, "maxNumber": 86, "minNumber": 11, "playerMaxNumber": 57, "playerMinNumber": 58}, "alliance_flexing_rule": [{"combination": {"alliances": [[{"max": 38, "min": 25, "name": "nlUnqxT1WsRNMZcA"}, {"max": 15, "min": 78, "name": "hzC7MNa8vVe4MHX6"}, {"max": 53, "min": 74, "name": "gMep90AyyUJyAK5P"}], [{"max": 90, "min": 9, "name": "MRMwdvl0hv6g62Gx"}, {"max": 57, "min": 62, "name": "W2tQF5tkTjgJaMYv"}, {"max": 80, "min": 21, "name": "QOsDa4bkcgepqtxj"}], [{"max": 3, "min": 6, "name": "rztee7QLTGAak7Ka"}, {"max": 30, "min": 51, "name": "l01DK97D2xnik42m"}, {"max": 17, "min": 90, "name": "teR5eQAe1rzmmgqB"}]], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 69, "role_flexing_second": 7}, "duration": 73, "max_number": 58, "min_number": 25, "player_max_number": 100, "player_min_number": 82}, {"combination": {"alliances": [[{"max": 62, "min": 12, "name": "oI8KDqebm83raNBJ"}, {"max": 14, "min": 51, "name": "SGSUOK68eqGJtWf1"}, {"max": 57, "min": 3, "name": "nNbn0zaf7CaOSlHX"}], [{"max": 36, "min": 96, "name": "KNqX9LM2IwEsdOGB"}, {"max": 57, "min": 93, "name": "wnzDX8v3xgC1Ge9P"}, {"max": 6, "min": 10, "name": "bTTAJ2Gp1r0sVZ6L"}], [{"max": 73, "min": 98, "name": "AOddIL2l3hPjNDKv"}, {"max": 18, "min": 78, "name": "IJFNxuNOmUSWw18T"}, {"max": 29, "min": 70, "name": "wBdkaZ3y6i38XQjL"}]], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 90, "role_flexing_second": 85}, "duration": 33, "max_number": 21, "min_number": 48, "player_max_number": 31, "player_min_number": 19}, {"combination": {"alliances": [[{"max": 18, "min": 65, "name": "LyEirURERnEMzpIm"}, {"max": 100, "min": 28, "name": "6sjAHyCK5tNanGBr"}, {"max": 21, "min": 52, "name": "iHF8ITGPRQBCgIs1"}], [{"max": 86, "min": 55, "name": "2lzxl0yF5m77TTh4"}, {"max": 13, "min": 4, "name": "Uoj8u2WRcLiEtzVl"}, {"max": 28, "min": 36, "name": "kflfn7pHY48F1dl1"}], [{"max": 34, "min": 27, "name": "92m3iRlfnBAk0Cwi"}, {"max": 54, "min": 38, "name": "5u6D31DjOsrs3CUY"}, {"max": 53, "min": 59, "name": "TdqnQGbqiqOkNeAT"}]], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 69, "role_flexing_second": 67}, "duration": 79, "max_number": 19, "min_number": 20, "player_max_number": 29, "player_min_number": 19}], "flexingRules": [{"attribute": "dd7CcJUrI6MAugK5", "criteria": "kypNrp2nFe9FmN86", "duration": 37, "reference": 0.7118421762134786}, {"attribute": "6x9cLJ1APnNlsa2b", "criteria": "RBr27fVMWuAfDqLM", "duration": 89, "reference": 0.6146595030474158}, {"attribute": "gzISomCsodJrhQW4", "criteria": "1q2OspCZbt3Uta5I", "duration": 9, "reference": 0.32929983898038795}], "match_options": {"options": [{"name": "GcL1koyHjCH5olYL", "type": "ETRpABAmO2EGvJ4U"}, {"name": "MS93yOxNInDByhno", "type": "luO6ti0QP2ssiJ66"}, {"name": "OzOj84O6tgohjtC7", "type": "bzjPpucddXJ5zifF"}]}, "matchingRules": [{"attribute": "8y959anrNSleywHb", "criteria": "Hig6IKWVZ77KeRWd", "reference": 0.4911705606536505}, {"attribute": "CaFGzfZ2hxcJ2Fne", "criteria": "mn7M23SzUo4hNBDh", "reference": 0.9865108977578119}, {"attribute": "ZFP1OW0nXOErQPS4", "criteria": "VsRoYIK69yg9ADCG", "reference": 0.13323606007077748}], "sub_game_modes": {}}, "sessionQueueTimeoutSeconds": 75, "socialMatchmaking": false, "use_sub_gamemode": true}' 'TniBgLsNhdgQ0JWZ' --login_with_auth "Bearer foo"
matchmaking-get-all-party-in-channel 'jNRSzOTqcVNX3ahv' --login_with_auth "Bearer foo"
matchmaking-get-all-sessions-in-channel 'xw9gwwhTnjN6wKZG' --login_with_auth "Bearer foo"
matchmaking-add-user-into-session-in-channel '{"blocked_players": ["W4y3f0R9s2kndhhZ", "hwAiLsZs4pmLDIQc", "h4IjDq9aT3qZyI0r"], "party_id": "YsWucAkXsVJbXi7e", "user_id": "RZa7WwIc895ImqK6"}' 'tVsaUq3stUh5J5Z9' 'GiBiSAylX5cS0IeH' --login_with_auth "Bearer foo"
matchmaking-delete-session-in-channel 'pWCugmfOL0QQpxsu' 'D8PGqku59eFJrOXy' --login_with_auth "Bearer foo"
matchmaking-delete-user-from-session-in-channel 'DYz9vMUOPG0iHDT8' 'QbF7gHPTPQbvLt2N' 'RqJGIKzLyH1y72L1' --login_with_auth "Bearer foo"
matchmaking-public-get-messages --login_with_auth "Bearer foo"
matchmaking-public-get-all-matchmaking-channel --login_with_auth "Bearer foo"
matchmaking-public-get-single-matchmaking-channel '3Ornyx34luLdvtsT' --login_with_auth "Bearer foo"
matchmaking-version-check-handler --login_with_auth "Bearer foo"
exit()
END

EXIT_CODE=$?

else

eval_tap() {
  if [ $1 -eq 0 ]; then
    echo "ok $2 - $3"
  else
    EXIT_CODE=1
    echo "not ok $2 - $3"
    sed 's/^/# /g' $4
  fi
  rm -f $4
}

echo "TAP version 13"
echo "1..30"

#- 1 Login
eval_tap 0 1 'Login # SKIP not tested' test.out
if [ $EXIT_CODE -ne 0 ]; then
  echo "Bail out! Login failed."
  exit $EXIT_CODE
fi

#- 2 GetHealthcheckInfo
$PYTHON -m $MODULE 'matchmaking-get-healthcheck-info' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 2 'GetHealthcheckInfo' test.out

#- 3 HandlerV3Healthz
$PYTHON -m $MODULE 'matchmaking-handler-v3-healthz' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 3 'HandlerV3Healthz' test.out

#- 4 GetAllChannelsHandler
$PYTHON -m $MODULE 'matchmaking-get-all-channels-handler' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 4 'GetAllChannelsHandler' test.out

#- 5 CreateChannelHandler
$PYTHON -m $MODULE 'matchmaking-create-channel-handler' \
    '{"deployment": "KXMjiw6gYPvfn2Qt", "description": "9iyq3Nyk8ncu2Z3e", "find_match_timeout_seconds": 59, "game_mode": "oLDvumfqrgSfnx2h", "joinable": true, "max_delay_ms": 4, "region_expansion_rate_ms": 82, "rule_set": {"alliance": {"combination": {"alliances": [[{"max": 70, "min": 7, "name": "sQ3PuppUxDSK8aOT"}, {"max": 67, "min": 34, "name": "MudcxlCV4cNbJGQ5"}, {"max": 16, "min": 23, "name": "lmOGF6dLLIeIVIjM"}], [{"max": 4, "min": 50, "name": "dlbdRXTGIrdNL5gJ"}, {"max": 84, "min": 48, "name": "qTAjgqaTHf1ANTJ9"}, {"max": 62, "min": 20, "name": "0Hiqm5IuLryiEXqv"}], [{"max": 95, "min": 31, "name": "WDjU1G0EVjVZw1To"}, {"max": 77, "min": 4, "name": "uPakQN1MpOs1RVFr"}, {"max": 6, "min": 77, "name": "g2CXxepx78fvsyhE"}]], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 74, "role_flexing_second": 80}, "max_number": 39, "min_number": 50, "player_max_number": 67, "player_min_number": 93}, "alliance_flexing_rule": [{"combination": {"alliances": [[{"max": 94, "min": 61, "name": "uQPIDpor7t1aJLNN"}, {"max": 51, "min": 92, "name": "6QIVC9Mfuc8VOsnm"}, {"max": 27, "min": 58, "name": "lVljdWYmELe74p38"}], [{"max": 44, "min": 2, "name": "umnxAnYBTxaTIz0j"}, {"max": 5, "min": 12, "name": "28XejRF94NIY9nMr"}, {"max": 57, "min": 24, "name": "Zo0lNUBDShHD32vv"}], [{"max": 77, "min": 19, "name": "28FPwTiXfLcxDC9Y"}, {"max": 26, "min": 78, "name": "d02mECIQhfIhHtAD"}, {"max": 96, "min": 77, "name": "Q9zimQTQT95pFJUA"}]], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 60, "role_flexing_second": 51}, "duration": 80, "max_number": 55, "min_number": 10, "player_max_number": 55, "player_min_number": 8}, {"combination": {"alliances": [[{"max": 33, "min": 74, "name": "guqD5xxGxBWtnTKU"}, {"max": 9, "min": 48, "name": "2znsqPzPkwCBo2Sw"}, {"max": 59, "min": 59, "name": "UsTag4MLAo3m61P2"}], [{"max": 48, "min": 84, "name": "aNfmn8Onb1a9gMz0"}, {"max": 65, "min": 3, "name": "2UBRmMhAbUWmFhdY"}, {"max": 77, "min": 34, "name": "WzMuv3zkUY0n0BAZ"}], [{"max": 21, "min": 47, "name": "IFbRkPSSITz4TjCr"}, {"max": 72, "min": 57, "name": "HXGXku2YVuOzhxHm"}, {"max": 27, "min": 36, "name": "shuLUk5WdpxjZx5n"}]], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 86, "role_flexing_second": 24}, "duration": 15, "max_number": 74, "min_number": 85, "player_max_number": 60, "player_min_number": 96}, {"combination": {"alliances": [[{"max": 8, "min": 94, "name": "bNkylbynkgT9vayL"}, {"max": 78, "min": 18, "name": "sDkci5rZ8iMlOuks"}, {"max": 87, "min": 19, "name": "JCiRFiZWwJ7NrTb1"}], [{"max": 94, "min": 16, "name": "B9YQzUJ9XlYJ8BzP"}, {"max": 50, "min": 62, "name": "S8zdhMeBXH8x6HdV"}, {"max": 11, "min": 14, "name": "ZVDAiU6iJOF7JKZF"}], [{"max": 81, "min": 22, "name": "ryY91lX8DD4MYXlr"}, {"max": 73, "min": 58, "name": "81lHvv9rqvEoM8Ym"}, {"max": 97, "min": 53, "name": "jAkO3HKsEp6KlqwW"}]], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 19, "role_flexing_second": 55}, "duration": 35, "max_number": 44, "min_number": 10, "player_max_number": 79, "player_min_number": 48}], "flexing_rule": [{"attribute": "7tuL81lsR7xxSVp3", "criteria": "Gd2TK0HzYviTgYmx", "duration": 68, "reference": 0.8866135865267708}, {"attribute": "JVBRLPZ6Iz8tne5d", "criteria": "bguBF6Gsvvdl8jHz", "duration": 37, "reference": 0.3779453752230877}, {"attribute": "7XZIjU4IK9lOLaZa", "criteria": "MphKCqTq3EVheJjo", "duration": 62, "reference": 0.4153397119704012}], "match_options": {"options": [{"name": "ujsmSmylT1YtxIq7", "type": "3aMb48jISd97KORR"}, {"name": "hxSWLWLNfHRD3V15", "type": "QaGGL46LuxJF3sbe"}, {"name": "qWBdQuWfgBAKx27M", "type": "SBqabUXOGkkoMUZn"}]}, "matching_rule": [{"attribute": "1YXj5zFZeOCOR9Nv", "criteria": "BQZSJPOIKrRBrYVz", "reference": 0.1315033352055518}, {"attribute": "9ui3lvozTt9TsH7A", "criteria": "0TuU2aL4bPkk11sy", "reference": 0.2969001190838859}, {"attribute": "6GdkDcos5uVJ0BJf", "criteria": "Z0jvA54CSqZFDsO1", "reference": 0.29898871393425486}], "rebalance_enable": false, "sub_game_modes": {"kYSCdnFKLc0xcTjq": {"alliance": {"combination": {"alliances": [[{"max": 19, "min": 7, "name": "Rdd85bdYUumPKVSZ"}, {"max": 59, "min": 49, "name": "g3XTc9vQe0dHJfF6"}, {"max": 75, "min": 91, "name": "IuvnRCa9JktyBdxk"}], [{"max": 65, "min": 74, "name": "KlQicdrxVhrtwSd9"}, {"max": 88, "min": 100, "name": "7ci0vfWVZoRRMPi5"}, {"max": 23, "min": 70, "name": "Skb5aBi9K9zyv6gF"}], [{"max": 1, "min": 71, "name": "dgx1JgjC56pda3Yh"}, {"max": 40, "min": 51, "name": "QxpCYME6x21pdX2Q"}, {"max": 91, "min": 34, "name": "PAd9sxoLnWGP1Paf"}]], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 42, "role_flexing_second": 5}, "max_number": 44, "min_number": 9, "player_max_number": 69, "player_min_number": 41}, "alliance_flexing_rule": [{"combination": {"alliances": [[{"max": 76, "min": 3, "name": "rGWDK41uMOC0mRvS"}, {"max": 30, "min": 97, "name": "aGk4ktF5wnJDg9Q3"}, {"max": 100, "min": 23, "name": "XiydCOInVolsr6CH"}], [{"max": 26, "min": 18, "name": "j763vLwtYEJTSiXj"}, {"max": 5, "min": 61, "name": "Y5ZPkv90lyKSTWLx"}, {"max": 92, "min": 31, "name": "FZ0LpupEi5DbkVs3"}], [{"max": 34, "min": 44, "name": "FTi1t530Wj1WfzIv"}, {"max": 5, "min": 52, "name": "3VlSXrA3XUGud4tV"}, {"max": 20, "min": 82, "name": "mxEf4XvVhFJTxFHI"}]], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 42, "role_flexing_second": 60}, "duration": 48, "max_number": 44, "min_number": 41, "player_max_number": 85, "player_min_number": 26}, {"combination": {"alliances": [[{"max": 3, "min": 33, "name": "1kuUfNfUDe4g7q6P"}, {"max": 69, "min": 30, "name": "EaqbzHvDDl1jiLw3"}, {"max": 6, "min": 78, "name": "hH4GVU7Exlkmc4xY"}], [{"max": 16, "min": 77, "name": "oaGouFu4hXONgUwJ"}, {"max": 28, "min": 6, "name": "UpryDeRcpUvlrw2M"}, {"max": 46, "min": 22, "name": "C1uuokpaIjL0Vxe5"}], [{"max": 28, "min": 77, "name": "l5TPC5GODS44bmm7"}, {"max": 19, "min": 79, "name": "PdKLddfdsUqjXVzW"}, {"max": 87, "min": 56, "name": "qxnWR5sheLgsAF4c"}]], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 99, "role_flexing_second": 30}, "duration": 13, "max_number": 88, "min_number": 43, "player_max_number": 50, "player_min_number": 28}, {"combination": {"alliances": [[{"max": 4, "min": 43, "name": "Giq9j2EyIknfLDpg"}, {"max": 69, "min": 13, "name": "nMOn8nc3gUZ8ZFyy"}, {"max": 62, "min": 9, "name": "r0KBXuJBqK4QtEyd"}], [{"max": 85, "min": 49, "name": "WLPBYiR3UbJc1ZYa"}, {"max": 30, "min": 72, "name": "x7C477etqgfOJDUT"}, {"max": 78, "min": 42, "name": "3uWVRz3V7YbJM3bN"}], [{"max": 76, "min": 64, "name": "WHAbCZixe2cQ6O30"}, {"max": 22, "min": 22, "name": "pzcBQMAEcNcJqrKx"}, {"max": 27, "min": 21, "name": "MzSYoc4ZjiMY4H34"}]], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 58, "role_flexing_second": 45}, "duration": 53, "max_number": 98, "min_number": 6, "player_max_number": 19, "player_min_number": 17}], "name": "24acYHbrryHB6GO9"}, "zP3FaepA3b3YJ9nJ": {"alliance": {"combination": {"alliances": [[{"max": 78, "min": 89, "name": "6vtT27xv85K5MU2q"}, {"max": 26, "min": 26, "name": "beqaVemINdClpF7O"}, {"max": 43, "min": 57, "name": "lBIEgjse5kd6GEDo"}], [{"max": 72, "min": 61, "name": "yq5E5HleLoog4me2"}, {"max": 81, "min": 99, "name": "BFp62xlXvVcJerTP"}, {"max": 99, "min": 85, "name": "02PWsHiKYArAxnKB"}], [{"max": 10, "min": 31, "name": "BfDlrQQuAc10Djjw"}, {"max": 78, "min": 50, "name": "v4vrIPRtvhQIyLar"}, {"max": 20, "min": 12, "name": "aLOKnX51yAB8Pa3u"}]], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 75, "role_flexing_second": 40}, "max_number": 15, "min_number": 1, "player_max_number": 13, "player_min_number": 77}, "alliance_flexing_rule": [{"combination": {"alliances": [[{"max": 99, "min": 24, "name": "GcA0h4G1LZ1HaX5U"}, {"max": 55, "min": 78, "name": "xUX1B9oVuzG2CnYX"}, {"max": 5, "min": 2, "name": "BF2g7TVtzYEHUodh"}], [{"max": 28, "min": 17, "name": "nVfxPwc259HF9ejH"}, {"max": 2, "min": 33, "name": "ILQruAuYyJLYGqMv"}, {"max": 77, "min": 90, "name": "4ouSgkpK70uJmUL0"}], [{"max": 42, "min": 29, "name": "zElixc023dIvDiA0"}, {"max": 40, "min": 37, "name": "QWlHwBcTtztx3VAl"}, {"max": 41, "min": 61, "name": "FbnATCzUOIzVcy9k"}]], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 54, "role_flexing_second": 62}, "duration": 77, "max_number": 97, "min_number": 36, "player_max_number": 28, "player_min_number": 45}, {"combination": {"alliances": [[{"max": 24, "min": 0, "name": "raa5v5P5Cj8hgFsq"}, {"max": 69, "min": 75, "name": "C9h5JPiMEtgKuiGT"}, {"max": 13, "min": 46, "name": "CX0rITajpwHITGeH"}], [{"max": 93, "min": 28, "name": "1rVAQSxp4qTB54mK"}, {"max": 54, "min": 41, "name": "V9DKlCeZ7mLYsHoo"}, {"max": 84, "min": 70, "name": "16GPrhn2etVIQvRk"}], [{"max": 86, "min": 72, "name": "YJ41U4ooQ980ywmg"}, {"max": 9, "min": 31, "name": "rmJYXsYgL7TfyIlA"}, {"max": 46, "min": 95, "name": "jTZdRZJJzWZwvTX2"}]], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 25, "role_flexing_second": 3}, "duration": 91, "max_number": 2, "min_number": 57, "player_max_number": 46, "player_min_number": 44}, {"combination": {"alliances": [[{"max": 78, "min": 70, "name": "1nwvSWdDwD7WJHzg"}, {"max": 81, "min": 37, "name": "ZUKsI5y0mR3zMyTs"}, {"max": 12, "min": 10, "name": "tKqnsIJctAdxyZVK"}], [{"max": 68, "min": 16, "name": "A9DkaSOWgtg8yw8l"}, {"max": 68, "min": 62, "name": "qJqzoKMRMG541PAi"}, {"max": 82, "min": 46, "name": "jULsx4SnKNXLMUaD"}], [{"max": 92, "min": 8, "name": "wwQlnNRZJHBSB4fZ"}, {"max": 100, "min": 45, "name": "EFIZs28Ff1kZp1Zk"}, {"max": 39, "min": 49, "name": "f4lhBPbarbWEm8bV"}]], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 28, "role_flexing_second": 5}, "duration": 76, "max_number": 11, "min_number": 98, "player_max_number": 58, "player_min_number": 29}], "name": "PdQhim9QKUAFTVYe"}, "lIlGJg9wdc8bihhW": {"alliance": {"combination": {"alliances": [[{"max": 20, "min": 36, "name": "fZpfcFBUsnnDJlmD"}, {"max": 6, "min": 16, "name": "H2RIJz1eI7Q5pu9P"}, {"max": 42, "min": 40, "name": "tLf6IrvZoBGQbO4S"}], [{"max": 61, "min": 35, "name": "WAJOA75K4BYJ2fkq"}, {"max": 19, "min": 72, "name": "ftRl9rZmtQUvro8T"}, {"max": 99, "min": 45, "name": "FdsJP1G9tyBTfERX"}], [{"max": 6, "min": 42, "name": "vgD1Qf7Ot2DkUt3y"}, {"max": 9, "min": 47, "name": "xZBRvxYnEBhXtAVx"}, {"max": 59, "min": 24, "name": "d3meTrT7cF9oVCh8"}]], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 81, "role_flexing_second": 73}, "max_number": 84, "min_number": 62, "player_max_number": 21, "player_min_number": 74}, "alliance_flexing_rule": [{"combination": {"alliances": [[{"max": 89, "min": 80, "name": "ssVejcL3kR3hCGNg"}, {"max": 0, "min": 16, "name": "JmuALlMQl9RLrthb"}, {"max": 11, "min": 87, "name": "p0VgweLlT2sY3SsT"}], [{"max": 28, "min": 67, "name": "DQY7kKU2u06Q4veu"}, {"max": 20, "min": 53, "name": "xtyQENvJrBCqeg67"}, {"max": 6, "min": 36, "name": "4RWOqO4U0bitNQLz"}], [{"max": 45, "min": 25, "name": "RoWnR0AbkCPY70Fm"}, {"max": 45, "min": 8, "name": "viVIBbcujF8Vk5qb"}, {"max": 100, "min": 82, "name": "lS6XdBaKSLCgOOPX"}]], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 96, "role_flexing_second": 36}, "duration": 15, "max_number": 72, "min_number": 23, "player_max_number": 6, "player_min_number": 72}, {"combination": {"alliances": [[{"max": 45, "min": 71, "name": "yqHDNacl4F9G6Dl5"}, {"max": 94, "min": 93, "name": "FwBY6HKXAblkT8VG"}, {"max": 13, "min": 41, "name": "SH8MGZGwiVj7eDTa"}], [{"max": 22, "min": 54, "name": "a9ABfX1IByPEOuPh"}, {"max": 66, "min": 38, "name": "Ju13b6o5uB2XM6IH"}, {"max": 51, "min": 51, "name": "7EEvHyLmcvrZZOdw"}], [{"max": 9, "min": 37, "name": "1x8RjU6Bi8JXE52s"}, {"max": 95, "min": 29, "name": "BBq2SimQQoLbe5YO"}, {"max": 73, "min": 98, "name": "vxGRxUzrTwagH7BM"}]], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 71, "role_flexing_second": 100}, "duration": 53, "max_number": 75, "min_number": 9, "player_max_number": 94, "player_min_number": 7}, {"combination": {"alliances": [[{"max": 81, "min": 79, "name": "FVBQ1crBXAupATO8"}, {"max": 42, "min": 20, "name": "sqVpdiWo8SjDAM0R"}, {"max": 16, "min": 72, "name": "w8wLYW3n4F3LD1ED"}], [{"max": 45, "min": 73, "name": "BXw5uBYeQZOzATNS"}, {"max": 97, "min": 98, "name": "9E9yyNb7yaLXzAVY"}, {"max": 51, "min": 14, "name": "mOuhCkZu4htrsf8e"}], [{"max": 70, "min": 72, "name": "FSovTGXaMsq8ePN1"}, {"max": 30, "min": 40, "name": "co2jx8Upe8SjMvpq"}, {"max": 79, "min": 31, "name": "whNBYl9iCqfW6rqG"}]], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 27, "role_flexing_second": 51}, "duration": 100, "max_number": 27, "min_number": 17, "player_max_number": 20, "player_min_number": 82}], "name": "4ysYPonb59gQffkN"}}}, "session_queue_timeout_seconds": 84, "social_matchmaking": false, "use_sub_gamemode": false}' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 5 'CreateChannelHandler' test.out

#- 6 DeleteChannelHandler
$PYTHON -m $MODULE 'matchmaking-delete-channel-handler' \
    'EpTnRUQr3RLOM1vE' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 6 'DeleteChannelHandler' test.out

#- 7 StoreMatchResults
$PYTHON -m $MODULE 'matchmaking-store-match-results' \
    '{"match_id": "x4gqDY6jwyKRxhkL", "players": [{"results": [{"attribute": "e5zohg9s9utRQt28", "value": 0.017656149715032488}, {"attribute": "6o3K0COF74tz6aeX", "value": 0.8261386074015221}, {"attribute": "OYwbwjMNdxKWlBfn", "value": 0.7019869243509096}], "user_id": "yFS0Ed7gTM5AVrtB"}, {"results": [{"attribute": "QiDTcNnZa6Zuxk6u", "value": 0.9493870704782533}, {"attribute": "HXXdiC9ZDj4E4mv1", "value": 0.8800486900920241}, {"attribute": "FNXypoOLl13j84P0", "value": 0.5850389939143451}], "user_id": "qirJ4PkMFtsnFfz8"}, {"results": [{"attribute": "Ew0X8fBuBSKLSQ4G", "value": 0.3537012537452996}, {"attribute": "Ltz50D3rpBfBovqL", "value": 0.35811054165698397}, {"attribute": "XBuT30EYeRj17xGh", "value": 0.013590852505669604}], "user_id": "BKoUfiHjGmCyPsKC"}]}' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 7 'StoreMatchResults' test.out

#- 8 Rebalance
$PYTHON -m $MODULE 'matchmaking-rebalance' \
    '{"match_id": "JTv1ic9gvagF2cSu"}' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 8 'Rebalance' test.out

#- 9 QueueSessionHandler
$PYTHON -m $MODULE 'matchmaking-queue-session-handler' \
    '{"channel": "ztsJ5tj64gV7nmDk", "client_version": "29mcjSuz9vbNStqP", "deployment": "tQmQN6eKAGiZFCft", "error_code": 93, "error_message": "VBPZ64j0HUONscof", "game_mode": "wYLQcDvkaEIIPoJT", "joinable": true, "match_id": "zEGXmVBZLyrH9J7B", "matching_allies": [{"matching_parties": [{"first_ticket_created_at": 29, "party_attributes": {"181q9GA5DydC2D8U": {}, "T6KOc4VPDUR9ayaz": {}, "qXRqegIUicYXXzxs": {}}, "party_id": "BFrUs9BYp6TgCejB", "party_members": [{"extra_attributes": {"d5o7iTST7R3KbbQG": {}, "ERMNpqWb51y5RUzv": {}, "MfTkPy0fGvTGgfLK": {}}, "user_id": "sg0b1Bq78cE5O5pm"}, {"extra_attributes": {"PnbiPJ9j4vxmbH3r": {}, "VaauufxkPHElug48": {}, "TgfNu0rqXUOyToLP": {}}, "user_id": "IREGIKlJt3EP9kKw"}, {"extra_attributes": {"kENQ8VOHGwbADMfu": {}, "Omh0lciRhVZ2DeoO": {}, "DXMzLSrzoiBnYi5U": {}}, "user_id": "Ws3tYlYeMoCimJyS"}], "ticket_created_at": 30, "ticket_id": "2vfJuje5cPnmGjTv"}, {"first_ticket_created_at": 54, "party_attributes": {"a5Pqx1K7qcAoijBP": {}, "Ap6EPb988NzxrDKV": {}, "pULjjiw3NeVG4DJi": {}}, "party_id": "9DaMrc0WFgKjE945", "party_members": [{"extra_attributes": {"x2CPVYYG9WvoGmAm": {}, "vaVV5YfxnUNcwjr7": {}, "gSGhnfuF4WZiQVIC": {}}, "user_id": "VpWd3UM08gMXhdf3"}, {"extra_attributes": {"juXW4JprIb3CJCAt": {}, "vSG8Cfa9dzOJDGCT": {}, "HIOFjeXbsSgR43kI": {}}, "user_id": "DzxBwqRJTzrHNZWU"}, {"extra_attributes": {"sq5lQo2jy29EJigq": {}, "YhyVhURx1yPeczRp": {}, "dk0HATGylx2JG2KN": {}}, "user_id": "GfhzfCTxxrsRRLee"}], "ticket_created_at": 94, "ticket_id": "tHzoWGdYohxMp3uO"}, {"first_ticket_created_at": 87, "party_attributes": {"Vug2zkVf6KgpKOcn": {}, "3tMD9UT67bOwugFD": {}, "a6wUQvehKqwCh86X": {}}, "party_id": "mRkCEcfHDCdl59Wp", "party_members": [{"extra_attributes": {"9A3tXGve6DdK6uvg": {}, "8f2cIoByk9fxtvsg": {}, "eAxo57nKAbZpsbJ4": {}}, "user_id": "Iu5KJ0ynxGBlacDC"}, {"extra_attributes": {"dFe8ATUqVxcSthrp": {}, "nMUBsnUfuQIcSbUt": {}, "5UGkInFGpuUsdtq4": {}}, "user_id": "dOwNESzCEW9dUVhZ"}, {"extra_attributes": {"jLftC3sCS8CpLCqP": {}, "D9CeDEdCnnL6Kt1B": {}, "jj3b8QM8Rr45ULqX": {}}, "user_id": "QgvwD3PsKDJiWxQB"}], "ticket_created_at": 46, "ticket_id": "Ntz7EFvowPgIGuet"}]}, {"matching_parties": [{"first_ticket_created_at": 49, "party_attributes": {"GDt47f9GWRlE9hqz": {}, "6rjDNo4rhjxUdMM8": {}, "3WekqfWv04vvn9bk": {}}, "party_id": "5qr8qs2mqtnGAqXU", "party_members": [{"extra_attributes": {"jNypF6MMqWpdEJsP": {}, "oaIbYz8cK5jlpJdr": {}, "e5ur6yvWJDdvM7T7": {}}, "user_id": "PX2vamIRZHzsIYOC"}, {"extra_attributes": {"UoiCXNjrdQL2jdx1": {}, "eIba1sB0HsJ06Dzf": {}, "bzRYt4OVUyumBeIq": {}}, "user_id": "dQGZC5kM03HHijsQ"}, {"extra_attributes": {"Rj7N8IAjmsonjj0Z": {}, "R50BQ1U6aFD3O2kX": {}, "QSc58zgZVl4gIF7v": {}}, "user_id": "3qbZu9M3OxqVAT4H"}], "ticket_created_at": 46, "ticket_id": "lRZ9Z1JBrHRzEOtI"}, {"first_ticket_created_at": 48, "party_attributes": {"EzwRjD7jmQJeFPgh": {}, "qamSc5y0X48eT7Ml": {}, "uexk87b9Z5BTsEA3": {}}, "party_id": "EdmW8saabP4xRowf", "party_members": [{"extra_attributes": {"NojzPXI2v0prR3OE": {}, "ey0MkZwS6TYwNN3U": {}, "Yhic03qGEg5fNzBV": {}}, "user_id": "rjo3g8CfRwtyl1He"}, {"extra_attributes": {"T7VEPgG40QyXzsOz": {}, "gck078IghoQBp2mW": {}, "AOYksczxBS0OBCa2": {}}, "user_id": "vWadLmQtYKmEMzic"}, {"extra_attributes": {"buL2S3RiW8dLTCBf": {}, "GUdVEdvdQL7sVwcZ": {}, "2PofaJoSqtrEOqxH": {}}, "user_id": "46fRTSZoDdT0fefo"}], "ticket_created_at": 94, "ticket_id": "eg3Nt2c0r4GqF0NH"}, {"first_ticket_created_at": 14, "party_attributes": {"XBWTbpAogG2wlZkL": {}, "huU5FI8NijFI0GKw": {}, "J3vfXlsAMy2Zp2UA": {}}, "party_id": "GxHnmSxvkG9UR5q9", "party_members": [{"extra_attributes": {"neoW6JBcGp9Rx2Rf": {}, "cRhXpmeeHdvphas9": {}, "S7ivHEoLbUMM47f1": {}}, "user_id": "UreUpxEkXIbE1ETz"}, {"extra_attributes": {"RJZKMavu4Ul2Iaie": {}, "EbPSE7TGkeHsYsW9": {}, "oGBN1pYMBwbPZTlM": {}}, "user_id": "lUvFEiGprcNSQ9kE"}, {"extra_attributes": {"eXBZ6FVrBzyhyhoS": {}, "6a9oe0JaXFpff28u": {}, "Ybe4Cf2HEHvVevhI": {}}, "user_id": "SjbtBJUK5fE3OufP"}], "ticket_created_at": 90, "ticket_id": "N066FXb88SbLOa21"}]}, {"matching_parties": [{"first_ticket_created_at": 60, "party_attributes": {"UJ34TIedV3HyoX4V": {}, "nO2LpBU08wfnlHBX": {}, "FIqFUmgUSMM5au8G": {}}, "party_id": "JT0mkVPI6zUtf3Qa", "party_members": [{"extra_attributes": {"JPGrTNcXXTUIggoH": {}, "89QNmI17UDb19R6H": {}, "7r1ta3m7jK5pxe82": {}}, "user_id": "pgFiAS6piIzmc8rK"}, {"extra_attributes": {"rKEPGSAcong6eNER": {}, "Uf8kjci1Ctccv9Gv": {}, "4tOcbnuCqf0lm6WB": {}}, "user_id": "kIzjoSV31tvmMB6j"}, {"extra_attributes": {"zrpRGESmooHiCV4G": {}, "UOnXpapXQGRakUbc": {}, "G7PcR4eiU3Idi55j": {}}, "user_id": "NrGNT2VHTKuIT5Fw"}], "ticket_created_at": 45, "ticket_id": "DR2NVyn4PRqf3eRb"}, {"first_ticket_created_at": 48, "party_attributes": {"qBAoKGcVCdMiSNV4": {}, "qBrt1kcLmRv6EJtl": {}, "5xWnsb8oWq94RImN": {}}, "party_id": "WVIJnhhwFDV1Vita", "party_members": [{"extra_attributes": {"omvWTzdsW4N70wYS": {}, "4Kj7Yi2VvoQNW8Yc": {}, "481dYdvGxJAMDRA1": {}}, "user_id": "LF7jdWlekFwO94VB"}, {"extra_attributes": {"CV9qJhWva2FPBujX": {}, "0geYCpGJM4sqsPNJ": {}, "MiZXXOFwmGWAvNF0": {}}, "user_id": "Z0GkwxUNYyNwGiKr"}, {"extra_attributes": {"knH0Y5mrQgLC6D2q": {}, "sFiQHglUQMZi5WjM": {}, "ZfOadpgegCUjTdi1": {}}, "user_id": "Ehr8OtqpNJ9R8TuN"}], "ticket_created_at": 50, "ticket_id": "kZyUV7t73VnSFbux"}, {"first_ticket_created_at": 7, "party_attributes": {"2B8QNUz0hFFNbH6j": {}, "2W4roZM2UKAXEEsL": {}, "5D0oiFchQnVeq3g2": {}}, "party_id": "AB2WIRUQmauIY5HX", "party_members": [{"extra_attributes": {"CZ0W4XmWP0HzSdiy": {}, "lLhVYszm8xY33OQb": {}, "umu2QHLyZNuysyM4": {}}, "user_id": "OfCzdQCXMAWnf87Y"}, {"extra_attributes": {"PNOe9Eevf1fhMg1E": {}, "2k7QLFrVgtX7y0fP": {}, "OieDCow2zXyFFVpM": {}}, "user_id": "87yqEwEacQMTlqN4"}, {"extra_attributes": {"LKkxJ5v3SBafnKNi": {}, "MPbFkFGA85W3HJkq": {}, "gS2B37wwoPYOHiIs": {}}, "user_id": "xmsLBPBJuNLnWRrt"}], "ticket_created_at": 100, "ticket_id": "K6J29v8MpBSpo3AK"}]}], "namespace": "RmnJkzJHAckUyBks", "party_attributes": {"YQfDm0RNFwiz70tR": {}, "VLMlHi8i9gOVqajU": {}, "WrgEsWDtaKzn8dZw": {}}, "party_id": "nnGeZsZVgbPzPFbr", "queued_at": 83, "region": "93TNNzot3sVli3GN", "server_name": "2XTrFibRAhzzEWzW", "status": "lTY70qdgJRvpZrSp", "ticket_id": "WX3KEe2BjV00ReCX", "updated_at": "1987-07-05T00:00:00Z"}' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 9 'QueueSessionHandler' test.out

#- 10 DequeueSessionHandler
$PYTHON -m $MODULE 'matchmaking-dequeue-session-handler' \
    '{"match_id": "ffjJJxlgjzIhpgOo"}' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 10 'DequeueSessionHandler' test.out

#- 11 QuerySessionHandler
$PYTHON -m $MODULE 'matchmaking-query-session-handler' \
    'IOD74V21HWDAfvXw' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 11 'QuerySessionHandler' test.out

#- 12 UpdatePlayTimeWeight
$PYTHON -m $MODULE 'matchmaking-update-play-time-weight' \
    '{"playtime": 7, "userID": "N1di1ldhOh6HvjnY", "weight": 0.3287884104108305}' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 12 'UpdatePlayTimeWeight' test.out

#- 13 GetAllPartyInAllChannel
$PYTHON -m $MODULE 'matchmaking-get-all-party-in-all-channel' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 13 'GetAllPartyInAllChannel' test.out

#- 14 BulkGetSessions
$PYTHON -m $MODULE 'matchmaking-bulk-get-sessions' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 14 'BulkGetSessions' test.out

#- 15 ExportChannels
$PYTHON -m $MODULE 'matchmaking-export-channels' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 15 'ExportChannels' test.out

#- 16 ImportChannels
$PYTHON -m $MODULE 'matchmaking-import-channels' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 16 'ImportChannels' test.out

#- 17 GetSingleMatchmakingChannel
$PYTHON -m $MODULE 'matchmaking-get-single-matchmaking-channel' \
    'V7NfC4A2ODiZhbfb' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 17 'GetSingleMatchmakingChannel' test.out

#- 18 UpdateMatchmakingChannel
$PYTHON -m $MODULE 'matchmaking-update-matchmaking-channel' \
    '{"deployment": "8QqCyK1XH9D6vl5e", "description": "FdFfgK46GjCWaP8h", "findMatchTimeoutSeconds": 42, "joinable": true, "max_delay_ms": 25, "region_expansion_rate_ms": 28, "ruleSet": {"alliance": {"combination": {"alliances": [[{"max": 66, "min": 33, "name": "qsWncp5LrqbiKudv"}, {"max": 34, "min": 53, "name": "4mChmQHQhO9IKBXD"}, {"max": 65, "min": 87, "name": "82D6gNClk9c87hos"}], [{"max": 1, "min": 52, "name": "PFC5zBW3ZgVZCj9O"}, {"max": 2, "min": 98, "name": "29BiJWOG1m7MKclr"}, {"max": 94, "min": 17, "name": "JTgCNNH7RtG5Xmo9"}], [{"max": 87, "min": 14, "name": "0Wb07N17fkxZSc6V"}, {"max": 3, "min": 100, "name": "E0AGcekjMNHuPXtz"}, {"max": 39, "min": 15, "name": "XxrmzafMUguyDoN9"}]], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 3, "role_flexing_second": 40}, "maxNumber": 69, "minNumber": 83, "playerMaxNumber": 29, "playerMinNumber": 91}, "alliance_flexing_rule": [{"combination": {"alliances": [[{"max": 83, "min": 32, "name": "wNEGSW5TaW4to7QC"}, {"max": 83, "min": 23, "name": "NGGvi9kg3rMIzNmh"}, {"max": 72, "min": 94, "name": "eg9q86IaDFjjx6uZ"}], [{"max": 9, "min": 13, "name": "rWbtwTX9gNRByjbE"}, {"max": 23, "min": 37, "name": "OLAfTXKLzbrddqcK"}, {"max": 76, "min": 34, "name": "a7LevxNHOSEhQRZI"}], [{"max": 32, "min": 93, "name": "693lRwtc43atCuCF"}, {"max": 49, "min": 2, "name": "yFQFdrRoM6FoqCYw"}, {"max": 83, "min": 55, "name": "qG5KDdUvk0LEi26L"}]], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 14, "role_flexing_second": 25}, "duration": 19, "max_number": 100, "min_number": 90, "player_max_number": 73, "player_min_number": 48}, {"combination": {"alliances": [[{"max": 23, "min": 81, "name": "SlCQMDji329PfVrv"}, {"max": 79, "min": 23, "name": "EPtpsSNcpK1QkB2S"}, {"max": 51, "min": 68, "name": "8Ww79LVeVskqeUB7"}], [{"max": 89, "min": 7, "name": "SayqGFguhh3bvadR"}, {"max": 39, "min": 15, "name": "38c7OydVw0zCqoMZ"}, {"max": 43, "min": 22, "name": "pIOO97DmQ5ZOzx6i"}], [{"max": 58, "min": 73, "name": "AyGrZO8GuoXNSoVE"}, {"max": 57, "min": 19, "name": "G7VbBPUWipz9C05Y"}, {"max": 0, "min": 2, "name": "sIllFtBtXJKG3rqB"}]], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 16, "role_flexing_second": 72}, "duration": 40, "max_number": 32, "min_number": 99, "player_max_number": 54, "player_min_number": 25}, {"combination": {"alliances": [[{"max": 74, "min": 90, "name": "MxBlrRytER1qdTel"}, {"max": 65, "min": 5, "name": "AadM9y66Drf4SSGG"}, {"max": 39, "min": 59, "name": "3MiBKohow3kKoaP1"}], [{"max": 76, "min": 33, "name": "4CDuH1mMIfOCDyVA"}, {"max": 68, "min": 36, "name": "qHYIZWnXqQ1oHFJ9"}, {"max": 88, "min": 91, "name": "0vqsL9SomqWsGA76"}], [{"max": 49, "min": 90, "name": "xi0QzZWfmP2sx0KO"}, {"max": 97, "min": 3, "name": "eHv0L2Acm960EYQE"}, {"max": 41, "min": 56, "name": "GJVl8xs1WId9Wlal"}]], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 39, "role_flexing_second": 30}, "duration": 15, "max_number": 65, "min_number": 59, "player_max_number": 88, "player_min_number": 89}], "flexingRules": [{"attribute": "6XOMXwKdfqk8T4QH", "criteria": "K30EX0FclpDl5Hsu", "duration": 35, "reference": 0.4265189469676247}, {"attribute": "rROIodcmM6v2AEoz", "criteria": "WWaYvBLE46bpuJip", "duration": 90, "reference": 0.5712195148024105}, {"attribute": "yxJ39vrtuWWrqTZb", "criteria": "SqBSKp8AmgwhYzk3", "duration": 94, "reference": 0.571394271459861}], "match_options": {"options": [{"name": "34fiTxK63OHpnUCG", "type": "BVfpctNFUsUQ6ZXQ"}, {"name": "cb2o1J5euLAbBgej", "type": "qc0apxqZ209BySn8"}, {"name": "aUaGlAyvIslt7N1q", "type": "cxKs4nlf1MfqUZXk"}]}, "matchingRules": [{"attribute": "jHvcUOTlxNf09pef", "criteria": "gFIiJssShBKsQjXv", "reference": 0.09166347155398136}, {"attribute": "QgQDt6ce8NDMErA8", "criteria": "2FrR1GSogkewIzTO", "reference": 0.2584723053948006}, {"attribute": "KkcjRh3l2gAJOTCb", "criteria": "x7J3gNLIlTk3Bpcl", "reference": 0.28052734743526264}], "sub_game_modes": {}}, "sessionQueueTimeoutSeconds": 22, "socialMatchmaking": true, "use_sub_gamemode": false}' \
    'owBhoUg4LsGP6KLP' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 18 'UpdateMatchmakingChannel' test.out

#- 19 GetAllPartyInChannel
$PYTHON -m $MODULE 'matchmaking-get-all-party-in-channel' \
    'XkvUv2XiXaBzsmax' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 19 'GetAllPartyInChannel' test.out

#- 20 GetAllSessionsInChannel
$PYTHON -m $MODULE 'matchmaking-get-all-sessions-in-channel' \
    'jTZPlLitytGka7Kv' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 20 'GetAllSessionsInChannel' test.out

#- 21 AddUserIntoSessionInChannel
$PYTHON -m $MODULE 'matchmaking-add-user-into-session-in-channel' \
    '{"blocked_players": ["5TacQKF4OlRGdmXx", "ETLEQrr3KCAV9alq", "3hK1G4kKooSNNUZu"], "party_id": "iynZ64IwncZPk82G", "user_id": "F3eTC0vzZUDj9dzG"}' \
    'gGVxo9OHgfHumyfu' \
    'BNisecYbcOpR45VD' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 21 'AddUserIntoSessionInChannel' test.out

#- 22 DeleteSessionInChannel
$PYTHON -m $MODULE 'matchmaking-delete-session-in-channel' \
    'lvSc0Mr7ImwCwGqO' \
    'f0bNs97KvKyj3MqS' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 22 'DeleteSessionInChannel' test.out

#- 23 DeleteUserFromSessionInChannel
$PYTHON -m $MODULE 'matchmaking-delete-user-from-session-in-channel' \
    '7Dcmtfh50eObbrmg' \
    'jhWK0x0ZidAJ1CU1' \
    'eD1La16Bw3JbUnUD' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 23 'DeleteUserFromSessionInChannel' test.out

#- 24 SearchSessions
eval_tap 0 24 'SearchSessions # SKIP deprecated' test.out

#- 25 GetSessionHistoryDetailed
eval_tap 0 25 'GetSessionHistoryDetailed # SKIP deprecated' test.out

#- 26 PublicGetMessages
$PYTHON -m $MODULE 'matchmaking-public-get-messages' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 26 'PublicGetMessages' test.out

#- 27 PublicGetAllMatchmakingChannel
$PYTHON -m $MODULE 'matchmaking-public-get-all-matchmaking-channel' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 27 'PublicGetAllMatchmakingChannel' test.out

#- 28 PublicGetSingleMatchmakingChannel
$PYTHON -m $MODULE 'matchmaking-public-get-single-matchmaking-channel' \
    'h5yGjjv4Mwrv2van' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 28 'PublicGetSingleMatchmakingChannel' test.out

#- 29 SearchSessionsV2
eval_tap 0 29 'SearchSessionsV2 # SKIP deprecated' test.out

#- 30 VersionCheckHandler
$PYTHON -m $MODULE 'matchmaking-version-check-handler' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 30 'VersionCheckHandler' test.out


fi

rm -f "tmp.dat"

exit $EXIT_CODE
