#!/usr/bin/env bash

# Copyright (c) 2021 AccelByte Inc. All Rights Reserved.
# This is licensed software from AccelByte Inc, for limitations
# and restrictions contact your company contract manager.
#
# Code generated. DO NOT EDIT!

# Meta:
# - random seed: 256
# - template file: python-cli-unit-test.j2

# Instructions:
# - Run the Justice SDK Mock Server first before running this script.

EXIT_CODE=0
PYTHON='python3'
MODULE='accelbyte_py_sdk_cli'
MODULE_PATH='../samples/cli'

export AB_BASE_URL="http://127.0.0.1:8080"
export AB_CLIENT_ID="admin"
export AB_CLIENT_SECRET="admin"
export AB_NAMESPACE="test"
export PYTHONPATH=$MODULE_PATH:$PYTHONPATH

touch "tmp.dat"

if [ "$BATCH" = true ] ; then

$PYTHON -m $MODULE 'start-interactive-session' --continue_on_error '--writer=tap' << END
matchmaking-get-healthcheck-info --login_with_auth "Bearer foo"
matchmaking-handler-v3-healthz --login_with_auth "Bearer foo"
matchmaking-get-all-channels-handler --login_with_auth "Bearer foo"
matchmaking-create-channel-handler '{"deployment": "EAxcVpFrttufHIRd", "description": "H9UzVRiXbqlAw7r6", "find_match_timeout_seconds": 100, "game_mode": "7eHpzSn3ZPUdc0qh", "joinable": false, "max_delay_ms": 100, "region_expansion_range_ms": 26, "region_expansion_rate_ms": 29, "region_latency_initial_range_ms": 51, "region_latency_max_ms": 31, "rule_set": {"alliance": {"combination": {"alliances": [[{"max": 56, "min": 72, "name": "m8SAMTwE6I56IaRD"}, {"max": 56, "min": 2, "name": "XxyaNoMR6hkspInr"}, {"max": 54, "min": 12, "name": "ip6lyzSxwElFHHdg"}], [{"max": 38, "min": 31, "name": "21Jub74CUkNmKJfh"}, {"max": 18, "min": 31, "name": "kY1aXlFcDtgOjchI"}, {"max": 42, "min": 69, "name": "a5tWEIC32ogW7olv"}], [{"max": 3, "min": 94, "name": "zsCTCrbCbPOyNQkT"}, {"max": 82, "min": 80, "name": "vyE3cwyALczNIicX"}, {"max": 25, "min": 0, "name": "WBZqxYG3aREAu2D6"}]], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 6, "role_flexing_second": 17}, "max_number": 84, "min_number": 89, "player_max_number": 16, "player_min_number": 24}, "alliance_flexing_rule": [{"combination": {"alliances": [[{"max": 94, "min": 57, "name": "7oFgx4c8OumKtPDK"}, {"max": 74, "min": 62, "name": "DXn7Z4U68su8Xfql"}, {"max": 34, "min": 63, "name": "NiTvB6SdAdIhUDrw"}], [{"max": 29, "min": 39, "name": "Z5MecdKi5r6QEa1y"}, {"max": 38, "min": 9, "name": "LEzth6mXhzkzWkFe"}, {"max": 7, "min": 90, "name": "dSpHt0P7MIIR7Cky"}], [{"max": 66, "min": 40, "name": "6C7duuyZ0GhDogqr"}, {"max": 16, "min": 51, "name": "BRd8lDR6qVNPRZYd"}, {"max": 65, "min": 90, "name": "LIAjGGJddVCvu9vx"}]], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 88, "role_flexing_second": 22}, "duration": 76, "max_number": 75, "min_number": 66, "player_max_number": 79, "player_min_number": 27}, {"combination": {"alliances": [[{"max": 91, "min": 70, "name": "0lyuI9a2I9u6Vpbs"}, {"max": 47, "min": 21, "name": "5w8hqUI06UpOXGSL"}, {"max": 25, "min": 96, "name": "CVuHOPlLlkvR8sKg"}], [{"max": 28, "min": 47, "name": "uRkgghGoYupD391C"}, {"max": 49, "min": 33, "name": "D6SCwGrncqmLtjQH"}, {"max": 54, "min": 25, "name": "f8TgoNm03VLisV6z"}], [{"max": 46, "min": 97, "name": "Puo3td6TC6I3lMjG"}, {"max": 91, "min": 39, "name": "WN2laRlxfcjHfYak"}, {"max": 95, "min": 3, "name": "CTqGkE7wcWfDslpJ"}]], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 66, "role_flexing_second": 40}, "duration": 55, "max_number": 77, "min_number": 85, "player_max_number": 88, "player_min_number": 52}, {"combination": {"alliances": [[{"max": 18, "min": 50, "name": "ZMdjxcBZufQxGiHP"}, {"max": 24, "min": 86, "name": "lG4cYEzfTD1ZBm3M"}, {"max": 33, "min": 84, "name": "HcUmLZZbSqb8RwNm"}], [{"max": 27, "min": 59, "name": "9HrNQy4uZAAiE0mi"}, {"max": 39, "min": 91, "name": "9RGCCHYzUOcEdscK"}, {"max": 69, "min": 13, "name": "PEqgA8yu7Vk6Jt4Y"}], [{"max": 25, "min": 16, "name": "os9Jcdos4fYcTVU6"}, {"max": 90, "min": 25, "name": "Bt0zYoMcHyCUEXlA"}, {"max": 44, "min": 77, "name": "xJMdalwSyliWMNW5"}]], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 41, "role_flexing_second": 33}, "duration": 39, "max_number": 79, "min_number": 23, "player_max_number": 56, "player_min_number": 98}], "flexing_rule": [{"attribute": "2jJCSQT279ZZPYGu", "criteria": "0rdlgdWyOtXi3cho", "duration": 88, "reference": 0.8649910709310511}, {"attribute": "X68cmDc3fxU8MyKr", "criteria": "QpM4hkkK6KKXNB3G", "duration": 45, "reference": 0.5767944816744368}, {"attribute": "8aeCnaLpUKp44YUD", "criteria": "jasWIPUvmEejtGeo", "duration": 51, "reference": 0.6114481580463396}], "match_options": {"options": [{"name": "sSSyDdmykmoPYgc2", "type": "L4jk4Lo0LSP0pf4I"}, {"name": "xjUkl535X3ateEKD", "type": "pADz1x3poD3Qgb3b"}, {"name": "oLQQ1MzH7Qm8bwbm", "type": "XgdAPh1EThG96gAF"}]}, "matching_rule": [{"attribute": "KK2WDgCcxvONZm3E", "criteria": "eERmDnyeFoF7VSZ6", "reference": 0.2504161639501601}, {"attribute": "f3vneSD2Tb3g7mSQ", "criteria": "UhAEtrmjqU6YE3p4", "reference": 0.18072800126000954}, {"attribute": "Sck0ZHn5GI39YBHq", "criteria": "aTHeKtW18iGeUlc9", "reference": 0.05054968042208763}], "rebalance_enable": false, "sub_game_modes": {"sogWa24CKNS0GqVv": {"alliance": {"combination": {"alliances": [[{"max": 96, "min": 91, "name": "fHQvsHXNUNe4mhgo"}, {"max": 87, "min": 91, "name": "B65lSAiYnNjkfZrQ"}, {"max": 44, "min": 66, "name": "oZk03QXcKMDYDDxH"}], [{"max": 92, "min": 83, "name": "ZjtqXyJ58f7Gc26S"}, {"max": 0, "min": 26, "name": "iGVkydwYWQG26yUZ"}, {"max": 81, "min": 25, "name": "hsfpFDcSDG8aMVGL"}], [{"max": 18, "min": 77, "name": "BNrDjqoxcwgGLXpU"}, {"max": 76, "min": 22, "name": "4pp2ncYAHdNzDmeI"}, {"max": 85, "min": 13, "name": "rOvDz9KOsb392k6Y"}]], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 65, "role_flexing_second": 43}, "max_number": 11, "min_number": 41, "player_max_number": 89, "player_min_number": 49}, "alliance_flexing_rule": [{"combination": {"alliances": [[{"max": 56, "min": 91, "name": "yjlBiuFM3FIoVk8T"}, {"max": 84, "min": 67, "name": "FAAMwzHPxB1UskYs"}, {"max": 39, "min": 47, "name": "9y1aZSWMiVi10sG6"}], [{"max": 44, "min": 79, "name": "xkfUcmqRRbceJ5i0"}, {"max": 63, "min": 5, "name": "eDxOgBnhhqElIaDm"}, {"max": 23, "min": 23, "name": "48wdNFLTm5T50x9W"}], [{"max": 94, "min": 3, "name": "GfH2rtOa4EXsXzOX"}, {"max": 86, "min": 20, "name": "Ak4mqrxzTtuLl4Xl"}, {"max": 2, "min": 47, "name": "GL8QOxtjzm8y2wNh"}]], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 78, "role_flexing_second": 29}, "duration": 16, "max_number": 8, "min_number": 50, "player_max_number": 59, "player_min_number": 72}, {"combination": {"alliances": [[{"max": 71, "min": 63, "name": "HeHSKLCa3xreNDUW"}, {"max": 10, "min": 25, "name": "hwH3q31A806DJgas"}, {"max": 51, "min": 4, "name": "fe2NubeoKFeIaFQC"}], [{"max": 29, "min": 60, "name": "Yk6QEgJjBbEDoNf3"}, {"max": 27, "min": 25, "name": "hEoRCAcf80zfFyab"}, {"max": 36, "min": 55, "name": "Yq6hRkloqxM3gpwx"}], [{"max": 4, "min": 74, "name": "fMy9XzjjI5YbsKoA"}, {"max": 61, "min": 77, "name": "kzJEN2VHzih3bit0"}, {"max": 97, "min": 23, "name": "Wn3CO39PXDNxtXge"}]], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 64, "role_flexing_second": 83}, "duration": 12, "max_number": 42, "min_number": 21, "player_max_number": 38, "player_min_number": 14}, {"combination": {"alliances": [[{"max": 1, "min": 18, "name": "ZA2yyd4mbqoOfADM"}, {"max": 80, "min": 8, "name": "AXFaY9eKa699bRVh"}, {"max": 50, "min": 35, "name": "aKwwrAP2aMlu7Wtj"}], [{"max": 58, "min": 8, "name": "toYetOO847g8OudO"}, {"max": 10, "min": 5, "name": "jnCuHZ3c46IjGa23"}, {"max": 25, "min": 44, "name": "qPNs92epxk0i8Vxs"}], [{"max": 82, "min": 57, "name": "ereSvf9699mCEHTh"}, {"max": 95, "min": 88, "name": "JkETAsSp7gh4TeUT"}, {"max": 20, "min": 3, "name": "OkAYfJB8AT9t4Tv2"}]], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 17, "role_flexing_second": 45}, "duration": 29, "max_number": 45, "min_number": 61, "player_max_number": 34, "player_min_number": 11}], "name": "lYB1RSKs6gQxC3Gb"}, "7S0o4zGYY7KQI1Ae": {"alliance": {"combination": {"alliances": [[{"max": 64, "min": 80, "name": "gPqaOkvo1aolB4lk"}, {"max": 76, "min": 39, "name": "B4EYOkQ1jMD3cym8"}, {"max": 49, "min": 89, "name": "IfkOVW2grREOLx0K"}], [{"max": 82, "min": 94, "name": "ww3HICQLfl7MUBG7"}, {"max": 34, "min": 25, "name": "tPu64yAtURKLRkb7"}, {"max": 84, "min": 69, "name": "TF6oQAXVG7tnsZg5"}], [{"max": 86, "min": 16, "name": "gXjvyGJPN4eXbJE5"}, {"max": 97, "min": 75, "name": "s2GcyomQoIXimBJe"}, {"max": 16, "min": 89, "name": "yxlNsjUgxBkF6wFP"}]], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 40, "role_flexing_second": 88}, "max_number": 19, "min_number": 10, "player_max_number": 8, "player_min_number": 16}, "alliance_flexing_rule": [{"combination": {"alliances": [[{"max": 29, "min": 37, "name": "gEhhM2rIizGdKvOP"}, {"max": 7, "min": 61, "name": "q5xrgxSmy1DN9LFk"}, {"max": 83, "min": 100, "name": "YqUiGKXVFCmpo6sP"}], [{"max": 47, "min": 39, "name": "VOEDSJsEK5QpNhlI"}, {"max": 17, "min": 91, "name": "p6iIaTIKUkmkk9QM"}, {"max": 95, "min": 80, "name": "Ynb76tFkEORV3bu1"}], [{"max": 2, "min": 9, "name": "NCtX7W40V6Do5sYa"}, {"max": 6, "min": 5, "name": "CCFrHHC3DpZxkrQD"}, {"max": 16, "min": 42, "name": "OG4UcqsuGKHhMRWL"}]], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 25, "role_flexing_second": 62}, "duration": 61, "max_number": 22, "min_number": 23, "player_max_number": 16, "player_min_number": 85}, {"combination": {"alliances": [[{"max": 77, "min": 27, "name": "uIpomM8sm1MiaI1m"}, {"max": 40, "min": 41, "name": "JoARtdbBe7udsMro"}, {"max": 21, "min": 24, "name": "0WvGYYnx4V709xbn"}], [{"max": 67, "min": 9, "name": "nzJ6fH24T805tVg8"}, {"max": 73, "min": 33, "name": "TVqJdvzcWbfUpaXp"}, {"max": 90, "min": 73, "name": "iWyerCSa8SRgwsAj"}], [{"max": 72, "min": 16, "name": "xsB0NRsB1fPqqRRu"}, {"max": 23, "min": 54, "name": "pqpymDkQhtrHWwRV"}, {"max": 27, "min": 27, "name": "wVBOqOHi8pWGd1ju"}]], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 71, "role_flexing_second": 17}, "duration": 22, "max_number": 34, "min_number": 20, "player_max_number": 88, "player_min_number": 89}, {"combination": {"alliances": [[{"max": 73, "min": 12, "name": "OqB5F93zFQbJndUD"}, {"max": 31, "min": 25, "name": "dONneAczbBdHb2sl"}, {"max": 40, "min": 88, "name": "71B1SmZp2JZp50Cn"}], [{"max": 86, "min": 92, "name": "b71ORYcmQbTU5JX8"}, {"max": 4, "min": 37, "name": "cLjMXJRk0eaKQDOJ"}, {"max": 44, "min": 70, "name": "rTefglSs6g4iY9u0"}], [{"max": 0, "min": 0, "name": "izwiilatuUjjt9lI"}, {"max": 78, "min": 33, "name": "Gql5ElEa9EIIlGcH"}, {"max": 57, "min": 49, "name": "3CfR3ncDlwi3v3MF"}]], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 76, "role_flexing_second": 5}, "duration": 9, "max_number": 38, "min_number": 10, "player_max_number": 74, "player_min_number": 4}], "name": "oELCpobBEG8X645x"}, "pdXpai0rYaT5hOPj": {"alliance": {"combination": {"alliances": [[{"max": 1, "min": 11, "name": "ues1Hhhkg1yLVbLF"}, {"max": 53, "min": 74, "name": "HEP8cM4NTwr0KHaA"}, {"max": 38, "min": 89, "name": "mTej52WKi6tArAUR"}], [{"max": 41, "min": 100, "name": "9plCSVq8PdH6hJPU"}, {"max": 55, "min": 42, "name": "c0RVwXgAgntLMCua"}, {"max": 30, "min": 56, "name": "V9Lx5RDA1l2Xcrci"}], [{"max": 5, "min": 81, "name": "UZGCHsZYoLfR1KtO"}, {"max": 43, "min": 92, "name": "7Zy0b65uvuKNuy0y"}, {"max": 39, "min": 93, "name": "ZQ7M6Nzy1adnSKOL"}]], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 24, "role_flexing_second": 7}, "max_number": 100, "min_number": 77, "player_max_number": 11, "player_min_number": 41}, "alliance_flexing_rule": [{"combination": {"alliances": [[{"max": 90, "min": 100, "name": "Sse6AAz3S4czz0QK"}, {"max": 64, "min": 82, "name": "lAVmVLu4AOec0z8e"}, {"max": 57, "min": 6, "name": "eeoip68J1nsv4W2O"}], [{"max": 73, "min": 77, "name": "htafxMSJlHeb34sZ"}, {"max": 76, "min": 40, "name": "Hcl5LLLOexL4fZvW"}, {"max": 39, "min": 59, "name": "ND2tcBFpX8lNtFEJ"}], [{"max": 40, "min": 73, "name": "nkY6Mca5afj12K2I"}, {"max": 51, "min": 22, "name": "rBvvWm4udE0OXudX"}, {"max": 13, "min": 22, "name": "Nne8kJATwlc6esUp"}]], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 26, "role_flexing_second": 71}, "duration": 73, "max_number": 20, "min_number": 36, "player_max_number": 9, "player_min_number": 52}, {"combination": {"alliances": [[{"max": 52, "min": 87, "name": "jrcaug6CWVG8SWP3"}, {"max": 12, "min": 6, "name": "lU6muswVJnNnN7kA"}, {"max": 0, "min": 37, "name": "7j0riFc5HTHQIoVs"}], [{"max": 67, "min": 29, "name": "tRbRcrEveMdAdiPK"}, {"max": 61, "min": 50, "name": "UVSC00PYeDcaggin"}, {"max": 47, "min": 17, "name": "nFIna3yddcbsPheT"}], [{"max": 69, "min": 59, "name": "26IUJNvYuGRUvpZa"}, {"max": 69, "min": 54, "name": "CuESOiIZsMfB4ZH3"}, {"max": 26, "min": 39, "name": "mDWORBVXTIIJM9Xs"}]], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 72, "role_flexing_second": 88}, "duration": 80, "max_number": 47, "min_number": 48, "player_max_number": 17, "player_min_number": 30}, {"combination": {"alliances": [[{"max": 40, "min": 81, "name": "371W9G4AvQkqsGnm"}, {"max": 50, "min": 30, "name": "o5JJTUVmb8GEXFTl"}, {"max": 62, "min": 49, "name": "MEsFzYqwgK1Np5no"}], [{"max": 7, "min": 34, "name": "BxqGWV6mTJ0sQs6X"}, {"max": 81, "min": 75, "name": "bjvqhnUVLWu8olKd"}, {"max": 47, "min": 75, "name": "L6ozRmDD0jJvlfV5"}], [{"max": 84, "min": 29, "name": "emPYdYT7DROCjtuz"}, {"max": 65, "min": 16, "name": "MbAG9YI89hmguB8F"}, {"max": 83, "min": 93, "name": "WGRaoQomSJC4DdrK"}]], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 91, "role_flexing_second": 98}, "duration": 96, "max_number": 93, "min_number": 88, "player_max_number": 56, "player_min_number": 85}], "name": "crM8rG0rH0zcswwV"}}}, "session_queue_timeout_seconds": 8, "social_matchmaking": true, "use_sub_gamemode": false}' --login_with_auth "Bearer foo"
matchmaking-get-match-pool-metric '6MbGIVIu8vvwLc7K' --login_with_auth "Bearer foo"
matchmaking-delete-channel-handler 'Y3uVoJXTIMtpgkie' --login_with_auth "Bearer foo"
matchmaking-store-match-results '{"match_id": "DyF97lGdMiHKxbWC", "players": [{"results": [{"attribute": "Yzo8yO2KTK9tmmOn", "value": 0.8190844170554401}, {"attribute": "nOpas6ghP1y4Zi7s", "value": 0.9563387971122524}, {"attribute": "QBlk44Z44B1GZgKg", "value": 0.9042049647327567}], "user_id": "uKxaCgcGLuC3brWd"}, {"results": [{"attribute": "TYCfHkIySok5DiXZ", "value": 0.31123975394054504}, {"attribute": "LW87rGysryod3dNQ", "value": 0.2782456065482112}, {"attribute": "msApRA6HX3RwrKt2", "value": 0.07190610455309188}], "user_id": "cozL0TOg54vCE48L"}, {"results": [{"attribute": "5oLF6M4lNa4JUMSH", "value": 0.629614160062952}, {"attribute": "gqRqCV7usamANkZl", "value": 0.6571855310479416}, {"attribute": "X9Sfo95HgXqKhTPk", "value": 0.36432263381896324}], "user_id": "fLM9uSybRzWek2gZ"}]}' --login_with_auth "Bearer foo"
matchmaking-rebalance '{"match_id": "vRrvr0n9d9lvccKM"}' --login_with_auth "Bearer foo"
matchmaking-queue-session-handler '{"channel": "LhrTrcBE2ItBS3Kt", "client_version": "KZWe8aoFzAyBME74", "deployment": "HUtipUWYhWV1qx8C", "error_code": 53, "error_message": "WA8NjxOnaEok4nOO", "game_mode": "CzfsflhjbngJOUn1", "joinable": false, "match_id": "G5MlfDTk8aG40Nln", "matching_allies": [{"matching_parties": [{"first_ticket_created_at": 5, "party_attributes": {"47fH0XrKEDpEY8Vn": {}, "ocGAjci0V3tBf2jn": {}, "HGKXphn50c9tNLDl": {}}, "party_id": "jhZ2jxLRX3z46OCa", "party_members": [{"extra_attributes": {"GBeMfPlNos4yBRjr": {}, "ERHEonAZR8GmEu0q": {}, "1p6QCyY6vSkVFWds": {}}, "user_id": "bYuVEGVxYheR3j5m"}, {"extra_attributes": {"NZ6vwv7K8Asvt1j1": {}, "Rx59hesNWy2NvZ85": {}, "DDKDAF8KDsBZOuYQ": {}}, "user_id": "J03BAHZ7c53q7akM"}, {"extra_attributes": {"pcmnnx6RVBrop9v7": {}, "aZK3h65hbN15zfQS": {}, "fQrtfF3TQN0OcNDL": {}}, "user_id": "r36vzohZyjMQAg5m"}], "ticket_created_at": 86, "ticket_id": "r39pysFO3Zvc1BZG"}, {"first_ticket_created_at": 67, "party_attributes": {"LyvfvHEsJKQQewVL": {}, "MUoAnaRcYp7FUjfI": {}, "GaffoflEIByYqeKN": {}}, "party_id": "0meGelYF5wWaDhuk", "party_members": [{"extra_attributes": {"U4khGG4vZFTYnPkm": {}, "Su4PWam1jxR7SETW": {}, "jteoc8fgvZDDhoO0": {}}, "user_id": "5oKqymxLD1Lcvw6T"}, {"extra_attributes": {"6mZEiwxxElpMYSWI": {}, "eVzm7z9noowmlTIK": {}, "Vowi0RY2VN4ZONJR": {}}, "user_id": "EdUQ3z9F1BxNNgnk"}, {"extra_attributes": {"e4akncw7wu9TmXfJ": {}, "WBPrx9Ns8eLzYEvw": {}, "SWTaLQjctvrK2jhs": {}}, "user_id": "YpKPlXn77AtYoFzL"}], "ticket_created_at": 54, "ticket_id": "Pr2QEPx3zTxBGtEJ"}, {"first_ticket_created_at": 70, "party_attributes": {"xevecWw7Rry0KK5r": {}, "gAGO0dW8rX2MVUGK": {}, "SZ4GcLkt4pK32sJx": {}}, "party_id": "lZcCTpTdRtCHvuk6", "party_members": [{"extra_attributes": {"B6XTmSLyn50sigBV": {}, "ZxiKdV57GvRyd9Uu": {}, "L02Le8HSCslsDd4M": {}}, "user_id": "1F5qRIblS7Nz81GR"}, {"extra_attributes": {"azPAANjfBoldFOyq": {}, "A2clJ5gEOaCgM6Yn": {}, "6RugbNEIpGBFUjOn": {}}, "user_id": "5mM7k8nbLzvtCIW5"}, {"extra_attributes": {"ynMKquUicAeIVXto": {}, "WAXhMlW4tLqX7OIC": {}, "f5oD1e6oI9FmYel0": {}}, "user_id": "kOw72o8Zkgk0jS6r"}], "ticket_created_at": 59, "ticket_id": "cXnAXyuGz6LlxHv8"}]}, {"matching_parties": [{"first_ticket_created_at": 91, "party_attributes": {"WrHSppnIZkNnTn3r": {}, "zH5NvAtcvNedgS1f": {}, "UfKmihDbmu8ePWlQ": {}}, "party_id": "MVDXEHeiGTnwyEw6", "party_members": [{"extra_attributes": {"hIWDZrpP7rz3ISW5": {}, "10kHr4isTKWjmv67": {}, "nuHCXWfwnwGioVwV": {}}, "user_id": "zmmBVVFfpqx1AeLt"}, {"extra_attributes": {"zcPJ3jtDYBo4FUTH": {}, "7CGfKSyxgRR1DiCq": {}, "SMzpqIFGLkDs7ACC": {}}, "user_id": "1RgBfoNrHlFi2qJL"}, {"extra_attributes": {"gmBLE35YhyiDV90S": {}, "eI5yppBHoytVznCg": {}, "Nyx9fbT63ShEh8Pb": {}}, "user_id": "GikLjgjcj34uulU6"}], "ticket_created_at": 65, "ticket_id": "pxeJlsBJT6Hh3OMj"}, {"first_ticket_created_at": 55, "party_attributes": {"Bhvhf8Q0DtJMcYQd": {}, "N66bswAgt65X4N1L": {}, "QZmB61JMdtwCVUrY": {}}, "party_id": "Que84dwmbwFEnAZa", "party_members": [{"extra_attributes": {"WsQJtRYoagRJK5PX": {}, "9UcOvhPyE11TRT2S": {}, "Kseoe8VLie0LBa36": {}}, "user_id": "KNzjf005CXNGehQ2"}, {"extra_attributes": {"aTjTDfKFDXC7eGL5": {}, "YhJDWh9YWqc0qgV6": {}, "d9yOfIMLds2DbPca": {}}, "user_id": "oMdtRLTmSvTkQQgB"}, {"extra_attributes": {"7exYvmHMxr5hPCJJ": {}, "ztJBg0tTJg46IewO": {}, "XE2AkCh3QIZsUf8l": {}}, "user_id": "GFXcmwTERHclOdxI"}], "ticket_created_at": 45, "ticket_id": "wWkLob9gKLqs2nEZ"}, {"first_ticket_created_at": 16, "party_attributes": {"j1mqUav7k05HAQlt": {}, "nSojV4jT65yclX2F": {}, "tAz0vJjFIYWOaNds": {}}, "party_id": "immkW2miH3xRHAKy", "party_members": [{"extra_attributes": {"4QxZkaXZ7vmiEd0J": {}, "PxVyQpshaDwNqTbb": {}, "FMXAMfVXe0GZeMgs": {}}, "user_id": "RsmH1EQrYmkPKTPO"}, {"extra_attributes": {"lhTtSiZNCxuogFte": {}, "THJe4BhSSQkQD6Wm": {}, "Ot6D7ufFVTOhvQpf": {}}, "user_id": "bBke8aEdd36xj6wy"}, {"extra_attributes": {"SoltDxsbzxrlaKEf": {}, "koYjY2o6ouRW9UtN": {}, "quwC3WgumrIz4NhG": {}}, "user_id": "ztZpr4U4fwQIiLXg"}], "ticket_created_at": 25, "ticket_id": "YBn2xaOBdPF0JmX8"}]}, {"matching_parties": [{"first_ticket_created_at": 34, "party_attributes": {"2b4gd3xOeii8Jnms": {}, "sep2xD2NY0kABeGs": {}, "9yxahld1pO0Gyf5P": {}}, "party_id": "O3COyMvczgEpzZ3F", "party_members": [{"extra_attributes": {"btxfhcRC7IVYa6iZ": {}, "5uFRYNn3SHiWxF0Y": {}, "buU5ar5qTLWUCy0A": {}}, "user_id": "fgc050XIZRW491e9"}, {"extra_attributes": {"4mQjVOOBnIWhunEl": {}, "qZUodp3IhtCSHy1e": {}, "i1fIrPvfHnRN06Ej": {}}, "user_id": "RwEQlNapJRfk4f9Z"}, {"extra_attributes": {"cw1pEHAyNFxcVTKu": {}, "AQTGh5BxjWOozGoD": {}, "tsUuYo5p8ED5QZAu": {}}, "user_id": "fwNa8lzfjv9oYMXM"}], "ticket_created_at": 19, "ticket_id": "s69FTFVGUVhvKhJC"}, {"first_ticket_created_at": 26, "party_attributes": {"MK0PcLnEkcokKwcQ": {}, "0baDT9OyJ2h23GUS": {}, "2amU7syGlElXdEAO": {}}, "party_id": "rVSnLocLVVYamQc4", "party_members": [{"extra_attributes": {"wcG5nDBLJoJHbiQ5": {}, "duE5p4cfs2E41cK8": {}, "QTwiIAvxSvNDlmM5": {}}, "user_id": "nQFMGzs7fzjgyc44"}, {"extra_attributes": {"mEh9tRk8knYSV30l": {}, "nroQehMDli6t9unQ": {}, "LYXxm09wpGAbpEmD": {}}, "user_id": "Y9vLh3u6EDsUmrV6"}, {"extra_attributes": {"kH4OotKwG3UC6XCn": {}, "nZxF8CmQr17W65br": {}, "34rBBN9tU6TDm5Gl": {}}, "user_id": "oFSKWM1eym5ydC6p"}], "ticket_created_at": 18, "ticket_id": "5xCWTqUOYZENJ1QH"}, {"first_ticket_created_at": 34, "party_attributes": {"QxPRXH7uxBJEECQE": {}, "1li3Bg7Jxc9pUnZm": {}, "vhidwCkZwqjYLfTi": {}}, "party_id": "CO1NDBvQvRPnAz4V", "party_members": [{"extra_attributes": {"zW0CpoBCbyJsF5Ij": {}, "F1c0W338HS6CBgVR": {}, "yihYNZ84CVhziXV8": {}}, "user_id": "HwSmvcvcDKF19yVR"}, {"extra_attributes": {"afCjOuSYht83AdvB": {}, "aagTiRJ8daGTVX3B": {}, "b7jlz5IfHgKjI9mw": {}}, "user_id": "JSrN8jkIykR2zbaI"}, {"extra_attributes": {"6PD7fEscShnGUGUt": {}, "V9GJ279GDbLNwjm3": {}, "FK0nnX2poMfZ1hDH": {}}, "user_id": "tbh4HtMlFgvh2Dp2"}], "ticket_created_at": 90, "ticket_id": "inFpnQ5xF9wwbvMZ"}]}], "namespace": "yeDeRnVfPUa6xVVB", "party_attributes": {"cq3wZpFIYeAg79Hc": {}, "LJXJ7mpVI6eTYAjd": {}, "PlCiQQC35cj4KyOV": {}}, "party_id": "gvnWbfRJtsB7cUQZ", "queued_at": 86, "region": "QUAxJrINPXppPNO3", "server_name": "AfmXcgwC3IN6tvKg", "status": "LB9QmJIOq9dP5szG", "ticket_id": "71utjsQ4CrRb9gUC", "updated_at": "1973-08-02T00:00:00Z"}' --login_with_auth "Bearer foo"
matchmaking-dequeue-session-handler '{"match_id": "Vz7fWbZIdhevfZvy"}' --login_with_auth "Bearer foo"
matchmaking-query-session-handler 'V7AcodcZwKjYDdmJ' --login_with_auth "Bearer foo"
matchmaking-update-play-time-weight '{"playtime": 83, "userID": "FtHIi1CMgKAOG5iD", "weight": 0.0415639826379296}' --login_with_auth "Bearer foo"
matchmaking-get-all-party-in-all-channel --login_with_auth "Bearer foo"
matchmaking-bulk-get-sessions --login_with_auth "Bearer foo"
matchmaking-export-channels --login_with_auth "Bearer foo"
matchmaking-import-channels --login_with_auth "Bearer foo"
matchmaking-get-single-matchmaking-channel 'CR5PbCvDLil8wj9c' --login_with_auth "Bearer foo"
matchmaking-update-matchmaking-channel '{"deployment": "KM3Ar6MF35hCER4n", "description": "GmWGgTJfHlJl4tHG", "findMatchTimeoutSeconds": 0, "joinable": true, "max_delay_ms": 11, "region_expansion_range_ms": 50, "region_expansion_rate_ms": 4, "region_latency_initial_range_ms": 55, "region_latency_max_ms": 6, "ruleSet": {"alliance": {"combination": {"alliances": [[{"max": 35, "min": 59, "name": "0u4q1bTHXIjfJKyF"}, {"max": 23, "min": 96, "name": "M0u1uuoVdn9yVoSl"}, {"max": 76, "min": 81, "name": "KwMZQjzvjSozv6CT"}], [{"max": 90, "min": 33, "name": "Dl0zp9CzHFwinkBN"}, {"max": 17, "min": 20, "name": "gvqgl6TZ9TGVPmv3"}, {"max": 70, "min": 14, "name": "QYBQuxLvPuWYvE3f"}], [{"max": 38, "min": 81, "name": "H6QXmpZ9X3fUSR1l"}, {"max": 61, "min": 48, "name": "2qfCXnlUnqxT1WsR"}, {"max": 81, "min": 80, "name": "MZcA92hzC7MNa8vV"}]], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 83, "role_flexing_second": 79}, "maxNumber": 49, "minNumber": 69, "playerMaxNumber": 59, "playerMinNumber": 53}, "alliance_flexing_rule": [{"combination": {"alliances": [[{"max": 74, "min": 13, "name": "lvIomU3pIxM9n8D2"}, {"max": 9, "min": 78, "name": "LMe3lt9qfx2UDcgV"}, {"max": 62, "min": 99, "name": "7L9FK6e0MrPc4vtx"}], [{"max": 21, "min": 88, "name": "9hVKlG56HlzGr7Xj"}, {"max": 6, "min": 35, "name": "yRJunZPkp6ccIBnW"}, {"max": 51, "min": 23, "name": "Pw8mj7gyQ7XdIszG"}], [{"max": 90, "min": 41, "name": "j46COPipH1MWVTHG"}, {"max": 90, "min": 34, "name": "md6mO4oI8KDqebm8"}, {"max": 81, "min": 36, "name": "GMy2pgSGSUOK68eq"}]], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 61, "role_flexing_second": 49}, "duration": 12, "max_number": 66, "min_number": 17, "player_max_number": 57, "player_min_number": 3}, {"combination": {"alliances": [[{"max": 27, "min": 13, "name": "Nbn0zaf7CaOSlHXr"}, {"max": 96, "min": 75, "name": "SA6sMJzA5mtqISQ8"}, {"max": 57, "min": 93, "name": "wnzDX8v3xgC1Ge9P"}], [{"max": 6, "min": 10, "name": "bTTAJ2Gp1r0sVZ6L"}, {"max": 73, "min": 98, "name": "AOddIL2l3hPjNDKv"}, {"max": 18, "min": 78, "name": "IJFNxuNOmUSWw18T"}], [{"max": 29, "min": 70, "name": "wBdkaZ3y6i38XQjL"}, {"max": 60, "min": 48, "name": "RqkpiFK5BtiQ272U"}, {"max": 29, "min": 80, "name": "9UBJWodpdwsX1jor"}]], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 50, "role_flexing_second": 27}, "duration": 89, "max_number": 67, "min_number": 57, "player_max_number": 47, "player_min_number": 36}, {"combination": {"alliances": [[{"max": 21, "min": 52, "name": "iHF8ITGPRQBCgIs1"}, {"max": 86, "min": 55, "name": "2lzxl0yF5m77TTh4"}, {"max": 13, "min": 4, "name": "Uoj8u2WRcLiEtzVl"}], [{"max": 28, "min": 36, "name": "kflfn7pHY48F1dl1"}, {"max": 34, "min": 27, "name": "92m3iRlfnBAk0Cwi"}, {"max": 54, "min": 38, "name": "5u6D31DjOsrs3CUY"}], [{"max": 53, "min": 59, "name": "TdqnQGbqiqOkNeAT"}, {"max": 20, "min": 68, "name": "eGjodd7CcJUrI6MA"}, {"max": 42, "min": 13, "name": "VOem2yqPsMFxKybP"}]], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 41, "role_flexing_second": 37}, "duration": 91, "max_number": 75, "min_number": 47, "player_max_number": 76, "player_min_number": 83}], "flexingRules": [{"attribute": "cLJ1APnNlsa2bRBr", "criteria": "27fVMWuAfDqLMR91", "duration": 71, "reference": 0.5496169382300646}, {"attribute": "ZPKOKiAVQXXOmqFH", "criteria": "LbyXmgCNiXH8uenb", "duration": 59, "reference": 0.6083453739043464}, {"attribute": "1koyHjCH5olYLETR", "criteria": "pABAmO2EGvJ4UMS9", "duration": 96, "reference": 0.390877262848055}], "match_options": {"options": [{"name": "OxNInDByhnoluO6t", "type": "i0QP2ssiJ66OzOj8"}, {"name": "4O6tgohjtC7bzjPp", "type": "ucddXJ5zifF8y959"}, {"name": "anrNSleywHbHig6I", "type": "KWVZ77KeRWdECaFG"}]}, "matchingRules": [{"attribute": "zfZ2hxcJ2Fnemn7M", "criteria": "23SzUo4hNBDh9ZFP", "reference": 0.8658508706271965}, {"attribute": "OW0nXOErQPS4VsRo", "criteria": "YIK69yg9ADCGiXaL", "reference": 0.2968946973404428}, {"attribute": "2xjHkinOD975nARH", "criteria": "CmhNHSXuqIHsxvaU", "reference": 0.22806739336229986}], "sub_game_modes": {}}, "sessionQueueTimeoutSeconds": 60, "socialMatchmaking": false, "use_sub_gamemode": false}' 'wwhTnjN6wKZGW4y3' --login_with_auth "Bearer foo"
matchmaking-get-all-party-in-channel 'f0R9s2kndhhZhwAi' --login_with_auth "Bearer foo"
matchmaking-get-all-sessions-in-channel 'LsZs4pmLDIQch4Ij' --login_with_auth "Bearer foo"
matchmaking-add-user-into-session-in-channel '{"blocked_players": ["Dq9aT3qZyI0rYsWu", "cAkXsVJbXi7eRZa7", "WwIc895ImqK6tVsa"], "party_id": "Uq3stUh5J5Z9GiBi", "user_id": "SAylX5cS0IeHpWCu"}' 'gmfOL0QQpxsuD8PG' 'qku59eFJrOXyDYz9' --login_with_auth "Bearer foo"
matchmaking-delete-session-in-channel 'vMUOPG0iHDT8QbF7' 'gHPTPQbvLt2NRqJG' --login_with_auth "Bearer foo"
matchmaking-delete-user-from-session-in-channel 'IKzLyH1y72L13Orn' 'yx34luLdvtsTKXMj' 'iw6gYPvfn2Qt9iyq' --login_with_auth "Bearer foo"
matchmaking-public-get-messages --login_with_auth "Bearer foo"
matchmaking-public-get-all-matchmaking-channel --login_with_auth "Bearer foo"
matchmaking-public-get-single-matchmaking-channel '3Nyk8ncu2Z3eDHH9' --login_with_auth "Bearer foo"
matchmaking-version-check-handler --login_with_auth "Bearer foo"
exit()
END

EXIT_CODE=$?

else

eval_tap() {
  if [ $1 -eq 0 ]; then
    echo "ok $2 - $3"
  else
    EXIT_CODE=1
    echo "not ok $2 - $3"
    sed 's/^/# /g' $4
  fi
  rm -f $4
}

echo "TAP version 13"
echo "1..31"

#- 1 Login
eval_tap 0 1 'Login # SKIP not tested' test.out
if [ $EXIT_CODE -ne 0 ]; then
  echo "Bail out! Login failed."
  exit $EXIT_CODE
fi

#- 2 GetHealthcheckInfo
$PYTHON -m $MODULE 'matchmaking-get-healthcheck-info' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 2 'GetHealthcheckInfo' test.out

#- 3 HandlerV3Healthz
$PYTHON -m $MODULE 'matchmaking-handler-v3-healthz' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 3 'HandlerV3Healthz' test.out

#- 4 GetAllChannelsHandler
$PYTHON -m $MODULE 'matchmaking-get-all-channels-handler' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 4 'GetAllChannelsHandler' test.out

#- 5 CreateChannelHandler
$PYTHON -m $MODULE 'matchmaking-create-channel-handler' \
    '{"deployment": "WaVO4iKhDcJ7TCcN", "description": "IsQ3PuppUxDSK8aO", "find_match_timeout_seconds": 94, "game_mode": "9qjNLwvI8JdiY3RR", "joinable": false, "max_delay_ms": 77, "region_expansion_range_ms": 16, "region_expansion_rate_ms": 23, "region_latency_initial_range_ms": 23, "region_latency_max_ms": 86, "rule_set": {"alliance": {"combination": {"alliances": [[{"max": 25, "min": 7, "name": "OGF6dLLIeIVIjMcd"}, {"max": 23, "min": 98, "name": "bdRXTGIrdNL5gJPq"}, {"max": 93, "min": 35, "name": "AjgqaTHf1ANTJ9Yk"}], [{"max": 69, "min": 17, "name": "7XkGOdC6ItxDT8p4"}, {"max": 27, "min": 19, "name": "4XCFkD1AJLCwszbZ"}, {"max": 49, "min": 0, "name": "uHSgDOK8bjoF7bL2"}], [{"max": 58, "min": 49, "name": "KbtZTGJpqgl2IzNX"}, {"max": 67, "min": 93, "name": "TuQPIDpor7t1aJLN"}, {"max": 81, "min": 95, "name": "z6QIVC9Mfuc8VOsn"}]], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 27, "role_flexing_second": 58}, "max_number": 23, "min_number": 49, "player_max_number": 98, "player_min_number": 25}, "alliance_flexing_rule": [{"combination": {"alliances": [[{"max": 23, "min": 43, "name": "jdWYmELe74p38vum"}, {"max": 28, "min": 56, "name": "xAnYBTxaTIz0jcgD"}, {"max": 70, "min": 8, "name": "Pkz96vd80msqIm5b"}], [{"max": 41, "min": 24, "name": "fnBqrpLeqhwVhjnn"}, {"max": 19, "min": 84, "name": "KMEmtbiWsAQHbMrK"}, {"max": 25, "min": 17, "name": "ECIQhfIhHtADUQ9z"}], [{"max": 17, "min": 25, "name": "oQf7BULnZDhutDM6"}, {"max": 55, "min": 8, "name": "qguqD5xxGxBWtnTK"}, {"max": 96, "min": 32, "name": "e2znsqPzPkwCBo2S"}]], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 59, "role_flexing_second": 95}, "duration": 39, "max_number": 93, "min_number": 17, "player_max_number": 1, "player_min_number": 14}, {"combination": {"alliances": [[{"max": 12, "min": 63, "name": "MLAo3m61P2xaNfmn"}, {"max": 14, "min": 83, "name": "NMd1onFjGRbxtABP"}, {"max": 14, "min": 61, "name": "AbUWmFhdYLWzMuv3"}], [{"max": 53, "min": 58, "name": "kUY0n0BAZkwbYkBL"}, {"max": 49, "min": 90, "name": "O6A0FqfhnaB3YxKN"}, {"max": 6, "min": 82, "name": "YVuOzhxHmnrrV9ZG"}], [{"max": 100, "min": 36, "name": "WdpxjZx5noXPhPUT"}, {"max": 75, "min": 82, "name": "bonoucNmzwOZOK56"}, {"max": 38, "min": 16, "name": "Dkci5rZ8iMlOuksQ"}]], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 89, "role_flexing_second": 89}, "duration": 0, "max_number": 65, "min_number": 73, "player_max_number": 16, "player_min_number": 47}, {"combination": {"alliances": [[{"max": 45, "min": 99, "name": "kWVco2LTo5ijlvDF"}, {"max": 72, "min": 33, "name": "9XlYJ8BzP6EUmUXG"}, {"max": 78, "min": 9, "name": "5anIloyj9lhbvuQd"}], [{"max": 100, "min": 17, "name": "jwKUckc794ryY91l"}, {"max": 60, "min": 18, "name": "D4MYXlrJ81lHvv9r"}, {"max": 33, "min": 23, "name": "vEoM8YmVjAkO3HKs"}], [{"max": 62, "min": 49, "name": "p6KlqwW4djrexcbH"}, {"max": 7, "min": 62, "name": "1lsR7xxSVp3Gd2TK"}, {"max": 59, "min": 68, "name": "i8HeV6jbalHmqBBf"}]], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 91, "role_flexing_second": 71}, "duration": 65, "max_number": 53, "min_number": 57, "player_max_number": 40, "player_min_number": 29}], "flexing_rule": [{"attribute": "ne5dbguBF6Gsvvdl", "criteria": "8jHz9x7XZIjU4IK9", "duration": 22, "reference": 0.37473877261913735}, {"attribute": "phTLEEBGTtZyTjdK", "criteria": "NKgYazujsmSmylT1", "duration": 29, "reference": 0.3082031426441024}, {"attribute": "xIq73aMb48jISd97", "criteria": "KORRhxSWLWLNfHRD", "duration": 85, "reference": 0.7616881164134187}], "match_options": {"options": [{"name": "15QaGGL46LuxJF3s", "type": "beqWBdQuWfgBAKx2"}, {"name": "7MSBqabUXOGkkoMU", "type": "Zn1YXj5zFZeOCOR9"}, {"name": "NvBQZSJPOIKrRBrY", "type": "Vzi9ui3lvozTt9Ts"}]}, "matching_rule": [{"attribute": "H7A0TuU2aL4bPkk1", "criteria": "1sys6GdkDcos5uVJ", "reference": 0.8461857012505076}, {"attribute": "BJfZ0jvA54CSqZFD", "criteria": "sO1skRjOU1SMfQVQ", "reference": 0.008578188960963296}, {"attribute": "6blj9Rdd85bdYUum", "criteria": "PKVSZCg3XTc9vQe0", "reference": 0.054625536924428064}], "rebalance_enable": false, "sub_game_modes": {"fF6KIuvnRCa9Jkty": {"alliance": {"combination": {"alliances": [[{"max": 57, "min": 7, "name": "8oaFKlQicdrxVhrt"}, {"max": 46, "min": 83, "name": "Sd9QWVMYz7TU1Tsx"}, {"max": 38, "min": 79, "name": "ChSclSkb5aBi9K9z"}], [{"max": 50, "min": 74, "name": "v6gFZXI5nXJ7hLi6"}, {"max": 69, "min": 31, "name": "weweRmyo91dIn7Qq"}, {"max": 57, "min": 32, "name": "DXJcrqKmXDwoEV6t"}], [{"max": 58, "min": 85, "name": "drxw1KOPhuvHuYrG"}, {"max": 99, "min": 61, "name": "Ycl2JfmQplvGjVQ4"}, {"max": 0, "min": 8, "name": "ktF5wnJDg9Q3WXiy"}]], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 80, "role_flexing_second": 83}, "max_number": 70, "min_number": 48, "player_max_number": 28, "player_min_number": 19}, "alliance_flexing_rule": [{"combination": {"alliances": [[{"max": 97, "min": 11, "name": "olsr6CHmj763vLwt"}, {"max": 39, "min": 63, "name": "wmeFpvtDtetoQVFL"}, {"max": 50, "min": 77, "name": "KSTWLxSFZ0LpupEi"}], [{"max": 18, "min": 60, "name": "RCn48bvkCPfKofwX"}, {"max": 82, "min": 70, "name": "WfzIvc3VlSXrA3XU"}, {"max": 66, "min": 93, "name": "ud4tVjmxEf4XvVhF"}], [{"max": 72, "min": 92, "name": "TxFHITBg9x4unq3e"}, {"max": 83, "min": 95, "name": "MHIKeTyBG5dCUoEx"}, {"max": 28, "min": 3, "name": "KfV3869IN4V1OdhH"}]], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 63, "role_flexing_second": 32}, "duration": 48, "max_number": 55, "min_number": 22, "player_max_number": 22, "player_min_number": 39}, {"combination": {"alliances": [[{"max": 26, "min": 71, "name": "c4xYiLjLyZrXr9Bh"}, {"max": 41, "min": 80, "name": "zn8jAdTn6xBhrcir"}, {"max": 51, "min": 24, "name": "Lm67rkadH5Y41SLj"}], [{"max": 59, "min": 84, "name": "Vxe5n9Lx3QcFo9gx"}, {"max": 83, "min": 13, "name": "4bmm7jPdKLddfdsU"}, {"max": 34, "min": 100, "name": "jXVzW1QqxnWR5she"}], [{"max": 76, "min": 75, "name": "gsAF4ctv5guycGiq"}, {"max": 40, "min": 19, "name": "QPxR7dvBVC5zgOKL"}, {"max": 94, "min": 60, "name": "nc3gUZ8ZFyyEr0KB"}]], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 73, "role_flexing_second": 7}, "duration": 56, "max_number": 70, "min_number": 34, "player_max_number": 45, "player_min_number": 75}, {"combination": {"alliances": [[{"max": 87, "min": 79, "name": "tEydPWLPBYiR3UbJ"}, {"max": 6, "min": 4, "name": "ZYapx7C477etqgfO"}, {"max": 72, "min": 60, "name": "FNEL3uWVRz3V7YbJ"}], [{"max": 79, "min": 81, "name": "3bNLWHAbCZixe2cQ"}, {"max": 93, "min": 83, "name": "cBGkc0HjUcnkpU9o"}, {"max": 97, "min": 35, "name": "zl2kBuLFXIeCEKZU"}], [{"max": 94, "min": 69, "name": "z3GvCAZ5j24acYHb"}, {"max": 35, "min": 96, "name": "ryHB6GO9zP3FaepA"}, {"max": 26, "min": 3, "name": "OS5mQNyRPZFPNP56"}]], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 94, "role_flexing_second": 80}, "duration": 96, "max_number": 82, "min_number": 76, "player_max_number": 34, "player_min_number": 75}], "name": "mbeqaVemINdClpF7"}, "OvlBIEgjse5kd6GE": {"alliance": {"combination": {"alliances": [[{"max": 60, "min": 29, "name": "mIE2kLTnJwc5XmkC"}, {"max": 42, "min": 9, "name": "L5W4tKt6G3j9LYdG"}, {"max": 94, "min": 48, "name": "PW02PWsHiKYArAxn"}], [{"max": 75, "min": 78, "name": "BfBfDlrQQuAc10Dj"}, {"max": 20, "min": 53, "name": "wMv4vrIPRtvhQIyL"}, {"max": 0, "min": 36, "name": "qfKegvFTD1sPykS8"}], [{"max": 42, "min": 77, "name": "NGKhaLlJzJMSnJII"}, {"max": 13, "min": 37, "name": "HaX5UBMbsF44VTsL"}, {"max": 61, "min": 67, "name": "Rzdq22cbnyK3ggFD"}]], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 21, "role_flexing_second": 69}, "max_number": 0, "min_number": 96, "player_max_number": 29, "player_min_number": 86}, "alliance_flexing_rule": [{"combination": {"alliances": [[{"max": 7, "min": 14, "name": "pnnVfxPwc259HF9e"}, {"max": 20, "min": 69, "name": "uqh7GAi4FEIu44u8"}, {"max": 45, "min": 77, "name": "24ouSgkpK70uJmUL"}], [{"max": 42, "min": 29, "name": "zElixc023dIvDiA0"}, {"max": 40, "min": 37, "name": "QWlHwBcTtztx3VAl"}, {"max": 41, "min": 61, "name": "FbnATCzUOIzVcy9k"}], [{"max": 16, "min": 9, "name": "AELr5lraa5v5P5Cj"}, {"max": 9, "min": 15, "name": "32AiwKadEoIVmprw"}, {"max": 85, "min": 74, "name": "sa9YD92CX0rITajp"}]], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 66, "role_flexing_second": 88}, "duration": 9, "max_number": 55, "min_number": 68, "player_max_number": 27, "player_min_number": 93}, {"combination": {"alliances": [[{"max": 28, "min": 34, "name": "rVAQSxp4qTB54mKA"}, {"max": 41, "min": 97, "name": "mx4ItzkMJ7cudf4r"}, {"max": 70, "min": 1, "name": "6GPrhn2etVIQvRkQ"}], [{"max": 72, "min": 53, "name": "J41U4ooQ980ywmg1"}, {"max": 31, "min": 35, "name": "WpWit1QC7FKe0fnH"}, {"max": 95, "min": 20, "name": "lmU1unGKM0tgfeWy"}], [{"max": 0, "min": 25, "name": "bbwMI4gGmvK9gW59"}, {"max": 73, "min": 64, "name": "HzgNZUKsI5y0mR3z"}, {"max": 79, "min": 60, "name": "yTsftKqnsIJctAdx"}]], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 98, "role_flexing_second": 14}, "duration": 75, "max_number": 68, "min_number": 16, "player_max_number": 54, "player_min_number": 35}, {"combination": {"alliances": [[{"max": 60, "min": 41, "name": "kaSOWgtg8yw8lHEb"}, {"max": 97, "min": 34, "name": "DwBAqanOlscRIWw8"}, {"max": 77, "min": 22, "name": "sx4SnKNXLMUaDSww"}], [{"max": 88, "min": 87, "name": "lnNRZJHBSB4fZWEF"}, {"max": 70, "min": 99, "name": "Zs28Ff1kZp1Zktx3"}, {"max": 81, "min": 24, "name": "7WNMYIfcDKbLu8pn"}], [{"max": 76, "min": 11, "name": "34oA1keYXJvtggDd"}, {"max": 19, "min": 10, "name": "bdjMBahFZZGMTcqn"}, {"max": 99, "min": 20, "name": "rIprOv0BJ9Sgl7H1"}]], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 16, "role_flexing_second": 69}, "duration": 63, "max_number": 29, "min_number": 90, "player_max_number": 21, "player_min_number": 70}], "name": "bUiYzCQh2iNTwtno"}, "hddMzMTQ9P7sYLDW": {"alliance": {"combination": {"alliances": [[{"max": 54, "min": 90, "name": "JOA75K4BYJ2fkqYJ"}, {"max": 29, "min": 40, "name": "F2FI3vyyqRzc20O7"}, {"max": 64, "min": 7, "name": "Wsz9TVmdMKEohKzu"}], [{"max": 79, "min": 14, "name": "YDUTLBeCidXjuGgx"}, {"max": 27, "min": 56, "name": "cXejmeZtzT0qj0lt"}, {"max": 38, "min": 25, "name": "qfiZrthVvyX0OCKD"}], [{"max": 73, "min": 84, "name": "E3RMUddwSSgxCu8z"}, {"max": 36, "min": 67, "name": "u1DhGAYOHR5BWa9V"}, {"max": 51, "min": 40, "name": "IkaQEl1iUProNB6h"}]], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 28, "role_flexing_second": 67}, "max_number": 59, "min_number": 4, "player_max_number": 86, "player_min_number": 94}, "alliance_flexing_rule": [{"combination": {"alliances": [[{"max": 29, "min": 100, "name": "kKU2u06Q4veujxty"}, {"max": 88, "min": 98, "name": "ENvJrBCqeg67d4RW"}, {"max": 83, "min": 47, "name": "qO4U0bitNQLzwRoW"}], [{"max": 26, "min": 15, "name": "R0AbkCPY70FmvviV"}, {"max": 71, "min": 100, "name": "BbcujF8Vk5qb8NhW"}, {"max": 99, "min": 46, "name": "dBaKSLCgOOPXM6XT"}], [{"max": 96, "min": 36, "name": "h2dJ90yqHDNacl4F"}, {"max": 23, "min": 66, "name": "bQ52FTHTCj6SEAzT"}, {"max": 22, "min": 93, "name": "T8VGgSH8MGZGwiVj"}]], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 90, "role_flexing_second": 93}, "duration": 77, "max_number": 0, "min_number": 0, "player_max_number": 22, "player_min_number": 54}, {"combination": {"alliances": [[{"max": 1, "min": 54, "name": "3nTMtXSAyejnny0J"}, {"max": 43, "min": 89, "name": "13b6o5uB2XM6IHy7"}, {"max": 63, "min": 32, "name": "EvHyLmcvrZZOdwe1"}], [{"max": 47, "min": 8, "name": "8RjU6Bi8JXE52sUB"}, {"max": 56, "min": 13, "name": "q2SimQQoLbe5YOJv"}, {"max": 47, "min": 30, "name": "GRxUzrTwagH7BMT1"}], [{"max": 71, "min": 100, "name": "ZKTdNFVBQ1crBXAu"}, {"max": 32, "min": 73, "name": "ATO8uXsqVpdiWo8S"}, {"max": 19, "min": 97, "name": "DAM0Riw8wLYW3n4F"}]], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 87, "role_flexing_second": 63}, "duration": 100, "max_number": 61, "min_number": 12, "player_max_number": 45, "player_min_number": 73}, {"combination": {"alliances": [[{"max": 56, "min": 32, "name": "Xw5uBYeQZOzATNSV"}, {"max": 1, "min": 62, "name": "c1cQvSxgTNIUzxDg"}, {"max": 57, "min": 83, "name": "lIbuzm7DzJ20NFRJ"}], [{"max": 71, "min": 90, "name": "hFXR2dYprPmbpupt"}, {"max": 63, "min": 29, "name": "CGd5cdXC2Sesc6y6"}, {"max": 31, "min": 46, "name": "uggOEdG47gD5i2Ni"}], [{"max": 88, "min": 54, "name": "ny4ij4ysYPonb59g"}, {"max": 87, "min": 60, "name": "ffkNOmubxEJr2qEA"}, {"max": 42, "min": 84, "name": "JbpZSrcbc4LWfKaY"}]], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 14, "role_flexing_second": 21}, "duration": 40, "max_number": 78, "min_number": 85, "player_max_number": 9, "player_min_number": 94}], "name": "zohg9s9utRQt28b6"}}}, "session_queue_timeout_seconds": 30, "social_matchmaking": false, "use_sub_gamemode": false}' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 5 'CreateChannelHandler' test.out

#- 6 GetMatchPoolMetric
$PYTHON -m $MODULE 'matchmaking-get-match-pool-metric' \
    'COF74tz6aeXZOYwb' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 6 'GetMatchPoolMetric' test.out

#- 7 DeleteChannelHandler
$PYTHON -m $MODULE 'matchmaking-delete-channel-handler' \
    'wjMNdxKWlBfnRyFS' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 7 'DeleteChannelHandler' test.out

#- 8 StoreMatchResults
$PYTHON -m $MODULE 'matchmaking-store-match-results' \
    '{"match_id": "0Ed7gTM5AVrtBQiD", "players": [{"results": [{"attribute": "TcNnZa6Zuxk6u6HX", "value": 0.7922446634536193}, {"attribute": "diC9ZDj4E4mv12FN", "value": 0.7947882187406355}, {"attribute": "ypoOLl13j84P0Kqi", "value": 0.27847955043858696}], "user_id": "J4PkMFtsnFfz8Ew0"}, {"results": [{"attribute": "X8fBuBSKLSQ4GvLt", "value": 0.40489519097422655}, {"attribute": "50D3rpBfBovqLwXB", "value": 0.3362129816828159}, {"attribute": "T30EYeRj17xGhaBK", "value": 0.2336049330102976}], "user_id": "UfiHjGmCyPsKCJTv"}, {"results": [{"attribute": "1ic9gvagF2cSuzts", "value": 0.5719534955368479}, {"attribute": "5tj64gV7nmDk29mc", "value": 0.15871112269365573}, {"attribute": "Suz9vbNStqPtQmQN", "value": 0.9359462196451279}], "user_id": "eKAGiZFCftT0RWEC"}]}' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 8 'StoreMatchResults' test.out

#- 9 Rebalance
$PYTHON -m $MODULE 'matchmaking-rebalance' \
    '{"match_id": "djWYrnulxcCKAru8"}' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 9 'Rebalance' test.out

#- 10 QueueSessionHandler
$PYTHON -m $MODULE 'matchmaking-queue-session-handler' \
    '{"channel": "pOaAVLDB4k3Jwkda", "client_version": "xR7GJpYmuYCPG181", "deployment": "q9GA5DydC2D8UT6K", "error_code": 82, "error_message": "sqDTynCewqJligLl", "game_mode": "RxOelKykICRxF6Ht", "joinable": false, "match_id": "s9BYp6TgCejBd5o7", "matching_allies": [{"matching_parties": [{"first_ticket_created_at": 16, "party_attributes": {"KXOutlYBbLhL8KXx": {}, "25FZfQIodVBqQsBp": {}, "CJBIXLGYcwWVRK6U": {}}, "party_id": "Kk5ozrXA4HZHNyq9", "party_members": [{"extra_attributes": {"odanhR1Zrm3thUvV": {}, "87yfkycLSVdleSaA": {}, "ylsmLYe2phYOgT5k": {}}, "user_id": "DTyPl3dKF7NXEjrJ"}, {"extra_attributes": {"Mki8jvc3P8Gwjg3I": {}, "OH0SDHgYKqxJiFJd": {}, "rmj5vhzgsJwex7wq": {}}, "user_id": "8ZPlXNaUNgdY2vfJ"}, {"extra_attributes": {"uje5cPnmGjTvYa5P": {}, "qx1K7qcAoijBPAp6": {}, "EPb988NzxrDKVpUL": {}}, "user_id": "jjiw3NeVG4DJi9Da"}], "ticket_created_at": 79, "ticket_id": "zriCDWXT59SRu0Yq"}, {"first_ticket_created_at": 96, "party_attributes": {"VYYG9WvoGmAmvaVV": {}, "5YfxnUNcwjr7gSGh": {}, "nfuF4WZiQVICVpWd": {}}, "party_id": "3UM08gMXhdf3juXW", "party_members": [{"extra_attributes": {"4JprIb3CJCAtvSG8": {}, "Cfa9dzOJDGCTHIOF": {}, "jeXbsSgR43kIDzxB": {}}, "user_id": "wqRJTzrHNZWUsq5l"}, {"extra_attributes": {"Qo2jy29EJigqYhyV": {}, "hURx1yPeczRpdk0H": {}, "ATGylx2JG2KNGfhz": {}}, "user_id": "fCTxxrsRRLee3TcJ"}, {"extra_attributes": {"7DQIi45aCDHN9mVu": {}, "g2zkVf6KgpKOcn3t": {}, "MD9UT67bOwugFDa6": {}}, "user_id": "wUQvehKqwCh86XmR"}], "ticket_created_at": 21, "ticket_id": "XEOEAEtbag82KgBg"}, {"first_ticket_created_at": 49, "party_attributes": {"tXGve6DdK6uvg8f2": {}, "cIoByk9fxtvsgeAx": {}, "o57nKAbZpsbJ4Iu5": {}}, "party_id": "KJ0ynxGBlacDCdFe", "party_members": [{"extra_attributes": {"8ATUqVxcSthrpnMU": {}, "BsnUfuQIcSbUt5UG": {}, "kInFGpuUsdtq4dOw": {}}, "user_id": "NESzCEW9dUVhZjLf"}, {"extra_attributes": {"tC3sCS8CpLCqPD9C": {}, "eDEdCnnL6Kt1Bjj3": {}, "b8QM8Rr45ULqXQgv": {}}, "user_id": "wD3PsKDJiWxQBwaS"}, {"extra_attributes": {"7rDBf2S54phbdyGD": {}, "t47f9GWRlE9hqz6r": {}, "jDNo4rhjxUdMM83W": {}}, "user_id": "ekqfWv04vvn9bk5q"}], "ticket_created_at": 35, "ticket_id": "sr9xYiWRuuzQJiLc"}]}, {"matching_parties": [{"first_ticket_created_at": 31, "party_attributes": {"eI9w3JEhxPGbEk7s": {}, "7gw07FlounC3vJKB": {}, "C7SwgoViPeIB4Ehy": {}}, "party_id": "0Y5aSJVDginxAM77", "party_members": [{"extra_attributes": {"eY9C14FbfiI2NPvl": {}, "1kCY5bEokxXxkWZb": {}, "jf7GZxaossQmjo69": {}}, "user_id": "wohJFyTNk5FGUPhR"}, {"extra_attributes": {"4LEZvz3EjFR7996U": {}, "g5m4axDV5uTcYsoa": {}, "hUrELQ1btjJOqQMg": {}}, "user_id": "ZWAU6E92nHJzvw7t"}, {"extra_attributes": {"nYtGfv0EJyjBu4Ez": {}, "wRjD7jmQJeFPghqa": {}, "mSc5y0X48eT7Mlue": {}}, "user_id": "xk87b9Z5BTsEA3Ed"}], "ticket_created_at": 26, "ticket_id": "WhT5B4WedopzwSlu"}, {"first_ticket_created_at": 55, "party_attributes": {"zPXI2v0prR3OEey0": {}, "MkZwS6TYwNN3UYhi": {}, "c03qGEg5fNzBVrjo": {}}, "party_id": "3g8CfRwtyl1HeT7V", "party_members": [{"extra_attributes": {"EPgG40QyXzsOzgck": {}, "078IghoQBp2mWAOY": {}, "ksczxBS0OBCa2vWa": {}}, "user_id": "dLmQtYKmEMzicbuL"}, {"extra_attributes": {"2S3RiW8dLTCBfGUd": {}, "VEdvdQL7sVwcZ2Po": {}, "faJoSqtrEOqxH46f": {}}, "user_id": "RTSZoDdT0fefo74e"}, {"extra_attributes": {"g3Nt2c0r4GqF0NHg": {}, "lOVuNZ9LzNeJnBur": {}, "h54CWbYb0Pebyt8b": {}}, "user_id": "4DGscjwrizsFUgYw"}], "ticket_created_at": 3, "ticket_id": "xHnmSxvkG9UR5q9n"}, {"first_ticket_created_at": 8, "party_attributes": {"TBjn3d2sFzMS3QaV": {}, "jZF7Ax6115Kg9U8v": {}, "rQJXQxoIbVi2CLEk": {}}, "party_id": "277Ivjj1A647XQ3k", "party_members": [{"extra_attributes": {"oaAfZIim0sFPm1YN": {}, "27bojDVaZLpx4kEW": {}, "YkO6KrKUMhJrASBh": {}}, "user_id": "61hmWKSSrF35anDG"}, {"extra_attributes": {"vur19V18oIrUKXtt": {}, "gAI2QdWJFLmoPEgd": {}, "8EMspOs8nkic9gj5": {}}, "user_id": "vyUMAAmIHYbsxG5N"}, {"extra_attributes": {"066FXb88SbLOa21D": {}, "iSFsm0XXQJWszvTQ": {}, "EuALzDNp1SZ58aDl": {}}, "user_id": "lwzTRHak1MXxj7Es"}], "ticket_created_at": 35, "ticket_id": "T0mkVPI6zUtf3QaJ"}]}, {"matching_parties": [{"first_ticket_created_at": 86, "party_attributes": {"CEzhVnOv0PQbVIaK": {}, "iHfoeorY7A1otGFy": {}, "v2SMjbEr50qGdCZI": {}}, "party_id": "c6EFqBKxbS7Q2OgR", "party_members": [{"extra_attributes": {"ucL1jwRXzfjDZZBm": {}, "Oau6syme06c6SKLc": {}, "2mEC3IXl5XCbkOfH": {}}, "user_id": "aGr5kdazlypvt6lS"}, {"extra_attributes": {"LfU7HByGXPMqxj4h": {}, "BgVY3YAxZLKbcOdy": {}, "jqf6Q4oiwoJcaRME": {}}, "user_id": "b15LBlTVufc5ZyOD"}, {"extra_attributes": {"R2NVyn4PRqf3eRbZ": {}, "qBAoKGcVCdMiSNV4": {}, "qBrt1kcLmRv6EJtl": {}}, "user_id": "5xWnsb8oWq94RImN"}], "ticket_created_at": 63, "ticket_id": "VIJnhhwFDV1Vitao"}, {"first_ticket_created_at": 26, "party_attributes": {"8DY0XOkDstxZcY1H": {}, "gAnZV4IOglVLqb9l": {}, "GAJUg21Lt7JwgwMU": {}}, "party_id": "SuC3Bajy3BcEMCtQ", "party_members": [{"extra_attributes": {"s2FcEcvVAyId6Cp8": {}, "5HVDsZBQgOnXuXsG": {}, "ThYZrmm0wrFMnPpW": {}}, "user_id": "grQD4hEk0OLjYsni"}, {"extra_attributes": {"gnE7KcMF7fuDbzRR": {}, "YMNXWUsp1tOibJY9": {}, "aL9ie6vvMbiNURrl": {}}, "user_id": "m88QlKyuoya4Jgak"}, {"extra_attributes": {"ZyUV7t73VnSFbuxd": {}, "4KYZ0jk0UZdhtnKu": {}, "9oTc8pVkiyGsj5Jd": {}}, "user_id": "XzRxfNEjUMTs8WIO"}], "ticket_created_at": 2, "ticket_id": "B2WIRUQmauIY5HXC"}, {"first_ticket_created_at": 76, "party_attributes": {"0W4XmWP0HzSdiylL": {}, "hVYszm8xY33OQbum": {}, "u2QHLyZNuysyM4Of": {}}, "party_id": "CzdQCXMAWnf87YPN", "party_members": [{"extra_attributes": {"Oe9Eevf1fhMg1E2k": {}, "7QLFrVgtX7y0fPOi": {}, "eDCow2zXyFFVpM87": {}}, "user_id": "yqEwEacQMTlqN4LK"}, {"extra_attributes": {"kxJ5v3SBafnKNiMP": {}, "bFkFGA85W3HJkqgS": {}, "2B37wwoPYOHiIsxm": {}}, "user_id": "sLBPBJuNLnWRrtW8"}, {"extra_attributes": {"70qD88ZcduZSe7W2": {}, "0UZcDaiq0nEZ7Pyh": {}, "qFJkDClOsKmfsgJd": {}}, "user_id": "mzsDPsWh1k0cQ08N"}], "ticket_created_at": 67, "ticket_id": "gEsWDtaKzn8dZwnn"}]}], "namespace": "GeZsZVgbPzPFbrOM", "party_attributes": {"ZMgWkFN7Tpkx6Gcf": {}, "yOg6ZUrrp9ubg9mn": {}, "dW2JKmQafUs2bxYz": {}}, "party_id": "tOEyVbKIf1ZbzgUw", "queued_at": 7, "region": "fjJJxlgjzIhpgOoI", "server_name": "OD74V21HWDAfvXwd", "status": "xbyp4HAPbBbNPStV", "ticket_id": "BUpKgOssFkz0F36p", "updated_at": "1975-09-01T00:00:00Z"}' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 10 'QueueSessionHandler' test.out

#- 11 DequeueSessionHandler
$PYTHON -m $MODULE 'matchmaking-dequeue-session-handler' \
    '{"match_id": "QqCyK1XH9D6vl5eF"}' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 11 'DequeueSessionHandler' test.out

#- 12 QuerySessionHandler
$PYTHON -m $MODULE 'matchmaking-query-session-handler' \
    'dFfgK46GjCWaP8hu' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 12 'QuerySessionHandler' test.out

#- 13 UpdatePlayTimeWeight
$PYTHON -m $MODULE 'matchmaking-update-play-time-weight' \
    '{"playtime": 93, "userID": "s0GqsWncp5LrqbiK", "weight": 0.33095485672286484}' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 13 'UpdatePlayTimeWeight' test.out

#- 14 GetAllPartyInAllChannel
$PYTHON -m $MODULE 'matchmaking-get-all-party-in-all-channel' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 14 'GetAllPartyInAllChannel' test.out

#- 15 BulkGetSessions
$PYTHON -m $MODULE 'matchmaking-bulk-get-sessions' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 15 'BulkGetSessions' test.out

#- 16 ExportChannels
$PYTHON -m $MODULE 'matchmaking-export-channels' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 16 'ExportChannels' test.out

#- 17 ImportChannels
$PYTHON -m $MODULE 'matchmaking-import-channels' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 17 'ImportChannels' test.out

#- 18 GetSingleMatchmakingChannel
$PYTHON -m $MODULE 'matchmaking-get-single-matchmaking-channel' \
    'dv9z75SzoCV8ZMi2' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 18 'GetSingleMatchmakingChannel' test.out

#- 19 UpdateMatchmakingChannel
$PYTHON -m $MODULE 'matchmaking-update-matchmaking-channel' \
    '{"deployment": "o1nR482D6gNClk9c", "description": "87hosaPFC5zBW3Zg", "findMatchTimeoutSeconds": 97, "joinable": false, "max_delay_ms": 5, "region_expansion_range_ms": 57, "region_expansion_rate_ms": 41, "region_latency_initial_range_ms": 20, "region_latency_max_ms": 41, "ruleSet": {"alliance": {"combination": {"alliances": [[{"max": 20, "min": 84, "name": "S029BiJWOG1m7MKc"}, {"max": 23, "min": 35, "name": "XTJTgCNNH7RtG5Xm"}, {"max": 29, "min": 49, "name": "9Q0Wb07N17fkxZSc"}], [{"max": 98, "min": 3, "name": "WDNoMcOmbfJrCJQI"}, {"max": 19, "min": 39, "name": "haAosKglqaCXE9yt"}, {"max": 31, "min": 70, "name": "uc28HoSpGt1g0GGb"}], [{"max": 94, "min": 99, "name": "4Hf2PPKOldkbgX9C"}, {"max": 100, "min": 73, "name": "rMIzNmhJTNQjKlwj"}, {"max": 11, "min": 61, "name": "J3TJ2xVpge70WsLf"}]], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 3, "role_flexing_second": 80}, "maxNumber": 90, "minNumber": 16, "playerMaxNumber": 57, "playerMinNumber": 9}, "alliance_flexing_rule": [{"combination": {"alliances": [[{"max": 49, "min": 90, "name": "jbE8lOLAfTXKLzbr"}, {"max": 6, "min": 34, "name": "dqcKLa7LevxNHOSE"}, {"max": 14, "min": 62, "name": "QRZIp693lRwtc43a"}], [{"max": 40, "min": 88, "name": "CuCFxbfbz4aQERzi"}, {"max": 86, "min": 30, "name": "L4dHhOqG5KDdUvk0"}, {"max": 76, "min": 63, "name": "sSck3ggZWJlSlCQM"}], [{"max": 61, "min": 18, "name": "ji329PfVrvMEPtps"}, {"max": 90, "min": 24, "name": "NcpK1QkB2Sy8Ww79"}, {"max": 77, "min": 69, "name": "VeVskqeUB7RSayqG"}]], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 42, "role_flexing_second": 14}, "duration": 36, "max_number": 14, "min_number": 30, "player_max_number": 2, "player_min_number": 56}, {"combination": {"alliances": [[{"max": 43, "min": 1, "name": "9VE838c7OydVw0zC"}, {"max": 34, "min": 100, "name": "oMZvpIOO97DmQ5ZO"}, {"max": 52, "min": 30, "name": "x6iCJTu60IifzMhk"}], [{"max": 21, "min": 91, "name": "5PxsjqbCKpMv2Yky"}, {"max": 59, "min": 61, "name": "05YabFX4FCK5ucTF"}, {"max": 37, "min": 54, "name": "rqBmILhtWm8RQvRU"}], [{"max": 2, "min": 89, "name": "UDSiefGEdLucrtO2"}, {"max": 13, "min": 51, "name": "CQD057DrDlgC2nzS"}, {"max": 29, "min": 92, "name": "how3kKoaP1K4CDuH"}]], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 78, "role_flexing_second": 76}, "duration": 70, "max_number": 1, "min_number": 10, "player_max_number": 30, "player_min_number": 82}, {"combination": {"alliances": [[{"max": 58, "min": 59, "name": "EkRdo6qHYIZWnXqQ"}, {"max": 56, "min": 30, "name": "UI9esSsXegSEhrPp"}, {"max": 75, "min": 38, "name": "2q8kxR4BuEksS2A9"}], [{"max": 97, "min": 38, "name": "OA8H9VeHv0L2Acm9"}, {"max": 6, "min": 51, "name": "EYQEuGJVl8xs1WId"}, {"max": 59, "min": 100, "name": "403HgoXCR6XOMXwK"}], [{"max": 7, "min": 66, "name": "fqk8T4QHK30EX0Fc"}, {"max": 22, "min": 90, "name": "pDl5HsuracO5Mnjn"}, {"max": 48, "min": 79, "name": "D1OXkxShFVQTRekL"}]], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 2, "role_flexing_second": 26}, "duration": 32, "max_number": 51, "min_number": 43, "player_max_number": 74, "player_min_number": 52}], "flexingRules": [{"attribute": "ip8JyxJ39vrtuWWr", "criteria": "qTZbSqBSKp8Amgwh", "duration": 52, "reference": 0.4626212057855923}, {"attribute": "NyT4k3DIbfT22G5N", "criteria": "pE130YWSgxpKWtdt", "duration": 7, "reference": 0.8373741307547898}, {"attribute": "XQcb2o1J5euLAbBg", "criteria": "ejqc0apxqZ209ByS", "duration": 27, "reference": 0.6257448417538893}], "match_options": {"options": [{"name": "cYYBixKJXCISQdwe", "type": "c1m8BusV9tUh74KV"}, {"name": "o6Xqjz2xUKLNWSmY", "type": "yVvyelIJ8QgaLMqi"}, {"name": "836ULa7cfZl4VuY6", "type": "rsZyo6CBRRnoOikI"}]}, "matchingRules": [{"attribute": "xXKKIR6kPmswm5TC", "criteria": "AU1cKApdJDnE73GL", "reference": 0.19988381888113282}, {"attribute": "SZns5owBhoUg4LsG", "criteria": "P6KLPXkvUv2XiXaB", "reference": 0.4191226472170996}, {"attribute": "smaxjTZPlLitytGk", "criteria": "a7Kv5TacQKF4OlRG", "reference": 0.05474915799121771}], "sub_game_modes": {}}, "sessionQueueTimeoutSeconds": 26, "socialMatchmaking": true, "use_sub_gamemode": false}' \
    'xETLEQrr3KCAV9al' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 19 'UpdateMatchmakingChannel' test.out

#- 20 GetAllPartyInChannel
$PYTHON -m $MODULE 'matchmaking-get-all-party-in-channel' \
    'q3hK1G4kKooSNNUZ' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 20 'GetAllPartyInChannel' test.out

#- 21 GetAllSessionsInChannel
$PYTHON -m $MODULE 'matchmaking-get-all-sessions-in-channel' \
    'uiynZ64IwncZPk82' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 21 'GetAllSessionsInChannel' test.out

#- 22 AddUserIntoSessionInChannel
$PYTHON -m $MODULE 'matchmaking-add-user-into-session-in-channel' \
    '{"blocked_players": ["GF3eTC0vzZUDj9dz", "GgGVxo9OHgfHumyf", "uBNisecYbcOpR45V"], "party_id": "DlvSc0Mr7ImwCwGq", "user_id": "Of0bNs97KvKyj3Mq"}' \
    'S7Dcmtfh50eObbrm' \
    'gjhWK0x0ZidAJ1CU' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 22 'AddUserIntoSessionInChannel' test.out

#- 23 DeleteSessionInChannel
$PYTHON -m $MODULE 'matchmaking-delete-session-in-channel' \
    '1eD1La16Bw3JbUnU' \
    'Dh5yGjjv4Mwrv2va' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 23 'DeleteSessionInChannel' test.out

#- 24 DeleteUserFromSessionInChannel
$PYTHON -m $MODULE 'matchmaking-delete-user-from-session-in-channel' \
    'ncmR6Z7rb21A2E9p' \
    'X0BWCMqPsRk5htdM' \
    '5T3fDSrSHrkoqv2m' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 24 'DeleteUserFromSessionInChannel' test.out

#- 25 SearchSessions
eval_tap 0 25 'SearchSessions # SKIP deprecated' test.out

#- 26 GetSessionHistoryDetailed
eval_tap 0 26 'GetSessionHistoryDetailed # SKIP deprecated' test.out

#- 27 PublicGetMessages
$PYTHON -m $MODULE 'matchmaking-public-get-messages' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 27 'PublicGetMessages' test.out

#- 28 PublicGetAllMatchmakingChannel
$PYTHON -m $MODULE 'matchmaking-public-get-all-matchmaking-channel' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 28 'PublicGetAllMatchmakingChannel' test.out

#- 29 PublicGetSingleMatchmakingChannel
$PYTHON -m $MODULE 'matchmaking-public-get-single-matchmaking-channel' \
    'M6soMaTvQq2a9YdF' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 29 'PublicGetSingleMatchmakingChannel' test.out

#- 30 SearchSessionsV2
eval_tap 0 30 'SearchSessionsV2 # SKIP deprecated' test.out

#- 31 VersionCheckHandler
$PYTHON -m $MODULE 'matchmaking-version-check-handler' \
    --login_with_auth "Bearer foo" \
    > test.out 2>&1
eval_tap $? 31 'VersionCheckHandler' test.out


fi

rm -f "tmp.dat"

exit $EXIT_CODE
